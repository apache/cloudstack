<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "cloudstack.ent">
%BOOK_ENTITIES;
]>
<!-- Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<book>
  <xi:include href="Book_Info_Release_Notes_4-0.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
  <xi:include href="Preface.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
  <chapter id="welcome-4.1">
    <title>Welcome to &PRODUCT; 4.1</title>
    <para>Welcome to the 4.1.0 release of &PRODUCT;, the first major release from the Apache
      CloudStack project since its graduation from the Apache Incubator.</para>
    <para>This document contains information specific to this release of &PRODUCT;, including
      upgrade instructions from prior releases, new features added to &PRODUCT;, API changes, and
      issues fixed in the release. For installation instructions, please see the <ulink
        url="http://cloudstack.apache.org/docs/en-US/Apache_CloudStack/4.1.0/html/Installation_Guide/index.html"
        >Installation Guide</ulink>. For usage and administration instructions, please see the
        <ulink
        url="http://cloudstack.apache.org/docs/en-US/Apache_CloudStack/4.1.0/html/Admin_Guide/index.html"
        >&PRODUCT; Administrator's Guide</ulink>. Developers and users who wish to work with the API
      will find instruction in the <ulink
        url="http://cloudstack.apache.org/docs/en-US/Apache_CloudStack/4.0.1-incubating/html/API_Developers_Guide/index.html"
        >&PRODUCT; API Developer's Guide</ulink></para>
    <para>If you find any errors or problems in this guide, please see <xref linkend="feedback"/>. We hope you enjoy
      working with &PRODUCT;!</para>
  </chapter>
  <chapter id="version-4.1">
    <title>Version 4.1.0</title>
    <section id="what-new-in-4.1">
      <title>Whatâ€™s New in 4.1</title>
      <para>Apache CloudStack 4.1.0 includes many new features. This section covers the most
        prominent new features and changes.</para>
      <section id="localization">
        <title>Localization</title>
        <para>The 4.1.0 release adds partial User Interface (UI) support for Catalan, Chinese,
          French, German, Italian, Japanese, Korean, Norwegian, Portuguese, Russian, and Spanish.
          Not all languages are complete.</para>
        <para>The 4.1.0 release also adds documentation translations for Chinese, Chinese (Taiwan),
          Italian, Japanese, Korean, and Portuguese.</para>
      </section>
      <section id="aws-style-regions">
        <title>Added Region Support</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-241"
            >CLOUDSTACK-241</ulink>: This feature adds a "region" construct that spans several
          management servers. The objective of this feature is to add AWS EC2 like Regions
          implementation into CloudStack. Regions are dispersed and located in separate geographic
          areas. Availability Zones (or Zones in CloudStack) are distinct locations within a Region
          that are engineered to be isolated from failures in other Zones and provide inexpensive,
          low latency network connectivity to other Zones in the same Region.</para>
        <para>Regions are expected to add the following benefits</para>
        <itemizedlist>
          <listitem>
            <para>Higher availability of the services: users can deploy services across AZs and even
              if one of the AZ goes down the services are still available to the end-user through
              VMs deployed in other zones.</para>
          </listitem>
          <listitem>
            <para>Higher availability of the Management Server (MS): Since each MS Cluster only
              manages a single Region, if that MS Cluster goes down, only that particular Region is
              impacted. Admin should be able to access all the other Regions.</para>
          </listitem>
          <listitem>
            <para>Scalability: The scalability limit of CloudStack dramatically improves, as the
              scalability limit of MS Cluster is limited to a single Region.</para>
          </listitem>
          <listitem>
            <para>Object Store: With Regions construct, CloudStack would also allow users to define
              Object Store (Secondary Storage) across AZs. This helps users easily deploy VMs in
              different AZs using the same template, offerings.</para>
          </listitem>
          <listitem>
            <para>Geographical Grouping: Regions allow admins to group AZs (that have low latency
              and are geographically located nearby) into a broader region construct.</para>
          </listitem>
        </itemizedlist>
        <para>Currently the Region feature is exposed in the API, but does not have a UI
          component.</para>
      </section>
      <section id="ec2-query-api">
        <title>Support for EC2 Query API</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-197"
            >CLOUDSTACK-197</ulink>: This introduces a query API for the AWS APIs that are currently
          only supported by SOAP. The AWS Java SDK and AWS PHP SDK should now be supported by the
          AWSAPI in CloudStack.</para>
        <para>Supported Query APIs in 4.1.0:</para>
        <itemizedlist>
          <listitem>
            <para><command>AllocateAddress</command></para>
          </listitem>
          <listitem>
            <para><command>AssociateAddress</command></para>
          </listitem>
          <listitem>
            <para><command>AttachVolume</command></para>
          </listitem>
          <listitem>
            <para><command>AuthorizeSecurityGroupIngress</command></para>
          </listitem>
          <listitem>
            <para><command>CreateImage</command></para>
          </listitem>
          <listitem>
            <para><command>CreateKeyPair</command></para>
          </listitem>
          <listitem>
            <para><command>CreateSecurityGroup</command></para>
          </listitem>
          <listitem>
            <para><command>CreateSnapshot</command></para>
          </listitem>
          <listitem>
            <para><command>CreateTags</command></para>
          </listitem>
          <listitem>
            <para><command>CreateVolume</command></para>
          </listitem>
          <listitem>
            <para><command>DeleteKeyPair</command></para>
          </listitem>
          <listitem>
            <para><command>DeleteSecurityGroup</command></para>
          </listitem>
          <listitem>
            <para><command>DeleteSnapshot</command></para>
          </listitem>
          <listitem>
            <para><command>DeleteTags</command></para>
          </listitem>
          <listitem>
            <para><command>DeleteVolume</command></para>
          </listitem>
          <listitem>
            <para><command>DeregisterImage</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeAddresses</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeAvailabilityZones</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeImageAttribute</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeImages</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeInstanceAttribute</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeInstances</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeKeyPairs</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeSecurityGroups</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeSnapshots</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeTags</command></para>
          </listitem>
          <listitem>
            <para><command>DescribeVolumes</command></para>
          </listitem>
          <listitem>
            <para><command>DetachVolume</command></para>
          </listitem>
          <listitem>
            <para><command>DisassociateAddress</command></para>
          </listitem>
          <listitem>
            <para><command>GetPasswordData</command></para>
          </listitem>
          <listitem>
            <para><command>ImportkeyPair</command></para>
          </listitem>
          <listitem>
            <para><command>ModifyImageAttribute</command></para>
          </listitem>
          <listitem>
            <para><command>RebootInstances</command></para>
          </listitem>
          <listitem>
            <para><command>RegisterImage</command></para>
          </listitem>
          <listitem>
            <para><command>ReleaseAddress</command></para>
          </listitem>
          <listitem>
            <para><command>ResetImageAttribute</command></para>
          </listitem>
          <listitem>
            <para><command>RevokeSecurityGroupIngress</command></para>
          </listitem>
          <listitem>
            <para><command>RunInstances</command></para>
          </listitem>
          <listitem>
            <para><command>StartInstances</command></para>
          </listitem>
          <listitem>
            <para><command>StopInstances</command></para>
          </listitem>
          <listitem>
            <para><command>TerminateInstances</command></para>
          </listitem>
        </itemizedlist>
        <para>See the <ulink
            url="https://cwiki.apache.org/CLOUDSTACK/ec2-functional-spec-for-query-api-support.html"
            >Feature Specification</ulink> for more information on the Query API support.</para>
      </section>
      <section id="cloudmonkey">
        <title>Auto-Completing Shell for CloudStack (CloudMonkey)</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-132"
            >CLOUDSTACK-132</ulink>: Adds a auto-completing shell and command-line tool for
          &PRODUCT; written in Python, called <application>CloudMonkey</application>.</para>
        <para>CloudMonkey includes the following features:</para>
        <itemizedlist>
          <listitem>
            <para>Usable as a command line tool and interactive shell.</para>
          </listitem>
          <listitem>
            <para>All commands are lowercase unlike API.</para>
          </listitem>
          <listitem>
            <para>Api Discovery using sync feature, with build time api precaching for failsafe
              sync.</para>
          </listitem>
          <listitem>
            <para>Raw api execution support.</para>
          </listitem>
          <listitem>
            <para>Auto-completion via double <command>tab</command>.</para>
          </listitem>
          <listitem>
            <para>Reverse search using <command>Ctrl+R</command></para>
          </listitem>
          <listitem>
            <para>Emacs compatible key bindings.</para>
          </listitem>
          <listitem>
            <para>Output that's "pipeable" to other *nix programs.</para>
          </listitem>
          <listitem>
            <para>Unix shell execution.</para>
          </listitem>
          <listitem>
            <para>Support to handle asynchronous jobs using user defined blocking or non-blocking
              way.</para>
          </listitem>
          <listitem>
            <para>Tabular or JSON output with filtering of table columns.</para>
          </listitem>
          <listitem>
            <para>Colored output.</para>
          </listitem>
          <listitem>
            <para>API parameter value completion (based on predication, fuzzy results may fail
              sometimes).</para>
          </listitem>
        </itemizedlist>
        <para>CloudMonkey has a few requirements above and beyond CloudStack, and does not need to
          be run on the same machine as a management server. If you wish to run
            <application>CloudMonkey</application> you'll need Python 2.5 or later,
            <application>readline</application>, <application>Pygments</application>, and
            <application>prettytable</application>. CloudMonkey can be installed with
            <application>pip</application>:</para>
        <programlisting language="Bash"><prompt>$</prompt> pip install cloudmonkey</programlisting>
        <para>See the Developer's Guide and <ulink
            url="https://cwiki.apache.org/CLOUDSTACK/cloudstack-cloudmonkey-cli.html">the CloudStack
            wiki</ulink> for the latest information on <application>CloudMonkey</application>
          installation and use.</para>
      </section>
      <section id="apidiscover">
        <title>API Discovery Service</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-926"
            >CLOUDSTACK-926</ulink>: CloudStack has more than 300 APIs and more are added in each
          major release. CloudStack admins can enable or disable APIs, or add plugins which provide
          more APIs. The API Discovery Service is a plugin which will help users discover the APIs
          available to them on a CloudStack Management Server.</para>
        <para>The discovery service implements a method called <command>listApis</command> which
          will return information about APIs for a user. It currently accepts an apiName to list api
          information of that particular API. The method ensures that user can only list APIs they
          are entitled to.</para>
        <para>All CloudStack APIs are implemented by annotated command class and PluggableService is
          a contract implemented by all the components such as the Management Server and all the
          plugins which provide an API. During load time, API discovery service asks all the
          pluggable services to return list of API cmd classes from whose fields and annotations it
          gathers information about each API, the information consists of name, description,
          parameter name, parameter description, etc.</para>
        <para>For more information on the implementation of the API Discovery Service for 4.1.0, see
          the <ulink url="https://cwiki.apache.org/CLOUDSTACK/api-discovery-service.html">CloudStack
            wiki</ulink>.</para>
      </section>
      <section id="events-framework">
        <title>Events Framework</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-820"
            >CLOUDSTACK-820</ulink>: The Events Framework provides a mechanism to publish and
          subscribe to events in &PRODUCT;.</para>
      </section>
      <section id="additional-vmx-settings">
        <title>Additional VMX Settings</title>
        <para>###</para>
      </section>
      <section id="l3-nicira">
        <title>L3 Router Functionality in Nicira Nvp Plugin</title>
        <para>###</para>
      </section>
      <section id="persistent-networks">
        <title>Persistent Networks without Running VM</title>
        <para>###</para>
      </section>
      <section id="add-remove-network-vm">
        <title>Add/Remove Network on VM</title>
        <para>###</para>
      </section>
      <section id="resize-volumes">
        <title>Resize Volumes Feature</title>
        <para>###</para>
      </section>
      <section id="autoscale">
        <title>Autoscale</title>
        <para>###</para>
      </section>
      <section id="api-throttling">
        <title>API Request Throttling</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-618"
            >CLOUDSTACK-618</ulink>: Limits the number of API requests per second that can be placed
          against a management server to avoid DoS attacks via API requests.</para>
        <para>The throttling is controlled by the <command>api.throttling.enabled</command>,
            <command>api.throttling.interval</command>, and <command>api.throttling.max</command>
          configuration settings. Note that <command>api.throttling.enabled</command> is set to
            <emphasis>false</emphasis> by default.</para>
      </section>
      <section id="s3-backed-storage">
        <title>S3 Backed Secondary Storage</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-509"
            >CLOUDSTACK-509</ulink>: This enhancement backs NFS secondary storage with an
          S3-compatible object store. Periodically, a reaper thread synchronizes the templates,
          ISOs, and snapshots stored on a NFS secondary storage mount with a configured S3 object
          store. In addition to permitting the use of commodity or IaaS storage solutions for static
          assets, it provides a means of automatically synchronizing template and ISO assets across
          multiple zones.</para>
        <para>See the <ulink
            url="https://cwiki.apache.org/CLOUDSTACK/s3-backed-secondary-storage.html">&PRODUCT;
            wiki</ulink> for more information on this feature, currently the <ulink
            url="https://issues.apache.org/jira/browse/CLOUDSTACK-878">documentation is
            incomplete</ulink>.</para>
      </section>
      <section id="user-domain-admin-create-key">
        <title>User and Domain Admin Can Create API Key and Secret</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-437"
            >CLOUDSTACK-437</ulink>: This feature adds the ability for domain admins and users to
          create their own API Key and Secret. Domain admins can create keys for themselves,
          subdomain admins, and for regular users, but not for other domain admins.</para>
      </section>
      <section id="inline-srx-f5-mode">
        <title>Support Inline Mode for F5 and SRX</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-306"
            >CLOUDSTACK-306</ulink>: For &PRODUCT; deployments using the Juniper SRX (firewall) and
          F5 Big IP (load balancer), &PRODUCT; 4.1.0 supports putting the firewall in front of the
          load balancer, making the firewall device the gateway and putting the load balancer behind
          the public network.</para>
      </section>
      <section id="egress-firewall">
        <title>Egress Firewall Rules for Guest Networks</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-299"
            >CLOUDSTACK-299</ulink>: This feature allows users to create egress (exit) traffic rules
          from private networks to public networks (<emphasis>e.g.</emphasis> from your internal
          network to the public Internet). By default all traffic is blocked from internal networks
          to the public networks, this allows you to open ports as necessary.</para>
        <para>Egress traffic rules are suppored only on virtual routers at this time, physical
          devices are not supported.</para>
      </section>
      <section id="reset-ssh-key">
        <title>Reset SSH Key to Access VM</title>
        <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-297"
            >CLOUDSTACK-297</ulink>: &PRODUCT; 4.1.0 introduces a new API
            <command>resetSSHKeyForVirtualMachine</command>, that can allow them to set or reset the
          SSH keypair assigned to a virtual machine.</para>
      </section>
    </section>
    <section id="issues-fixed-4.0">
      <title>Issues Fixed in 4.1.0</title>
      <para>Apache CloudStack uses <ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK"
          >Jira</ulink> to track its issues. All new features and bugs for 4.1.0 have been tracked
        in Jira, and have a standard naming convention of "CLOUDSTACK-NNNN" where "NNNN" is the
        issue number.</para>
      <para>This section includes a summary of known issues against 4.0.0 that were fixed in 4.1.0.
        Approximately 470 bugs were resolved or closed in the 4.1.0 cycle.</para>
      <informaltable>
        <tgroup cols="2" align="left" colsep="1" rowsep="1">
          <colspec colwidth="1*" colname="1" colnum="1"/>
          <colspec colwidth="2*" colname="2" colnum="2"/>
          <thead>
            <row>
              <entry>
                <para>Defect</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>CLOUDSTACK-46</para>
              </entry>
              <entry>
                <para>Remnants of mycloud remain.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-70</para>
              </entry>
              <entry>
                <para>Improve Network Restart Behaviour for Basic Zone: Restarting Network
                  Fail</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-94</para>
              </entry>
              <entry>
                <para>"API command, listIsos documentation clarity</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-95</para>
              </entry>
              <entry>
                <para>IP address allocation not working when a user tries to allocate IP addresses
                  in a Project</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-97</para>
              </entry>
              <entry>
                <para>Vmware network labels are ignored when creating a Zone using basic
                  networking</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-108</para>
              </entry>
              <entry>
                <para>VM should not be allowed to be deployed on two Isolated Networks of an Account
                  that were created from DefaultNetworkOfferingwithSourceNATService</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-118</para>
              </entry>
              <entry>
                <para>Status of host resorce stuck in "ErrorInMaintenance"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-119</para>
              </entry>
              <entry>
                <para>Move Agent-Simulator in to the hypervisor plugin model</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-130</para>
              </entry>
              <entry>
                <para>Clarify docs on tags parameter in API reference</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-152</para>
              </entry>
              <entry>
                <para>Routes on the User VM are programmed incorrectly on a VM present on both
                  Isolated and Shared Guest Network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-178</para>
              </entry>
              <entry>
                <para>Expose name parameter of VM in list Vm view.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-198</para>
              </entry>
              <entry>
                <para>vpn:failto add VPN Users deletes all the existing Vpn user</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-222</para>
              </entry>
              <entry>
                <para>Admin UI prompts to restart Management server with cancel edit
                  operation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-225</para>
              </entry>
              <entry>
                <para>API Docs: Request params repeated with different description</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-226</para>
              </entry>
              <entry>
                <para>UpdatePhysicalNetworkcommand failed due to java.sql.BatchUpdateException ;
                  Tried to extend the existing Guest VLAN Range of one physical network into the
                  Guest VLAN range of the other physical network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-227</para>
              </entry>
              <entry>
                <para>ReconnectHostCmd: NullPointerException: Unable to get host Information for
                  XenServer 6.0.2 host - on intentionally changing the traffic labels on the
                  physical network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-228</para>
              </entry>
              <entry>
                <para>UI provides an option to reconnect a disconnected host - ServerApiException is
                  thrown on an attempt</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-232</para>
              </entry>
              <entry>
                <para>Zone infrastructure chart -- disable resource total display</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-235</para>
              </entry>
              <entry>
                <para>Network rate can be set in 2 places. Clarify docs on how this works</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-249</para>
              </entry>
              <entry>
                <para>Add host id to failed VM deploy alerts</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-250</para>
              </entry>
              <entry>
                <para>Incorrect description of maintenance mode in admin guide</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-256</para>
              </entry>
              <entry>
                <para>"vpn:As an admin user, not able to delete VPN user which is present in a
                  regular user's network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-271</para>
              </entry>
              <entry>
                <para>updatePhysicalNetwork dies with an NPE when the vlan range is empty</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-274</para>
              </entry>
              <entry>
                <para>Two error codes mapped to same value in API</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-275</para>
              </entry>
              <entry>
                <para>hostid not always a UUID</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-277</para>
              </entry>
              <entry>
                <para>Message during CloudStack management server Installation: cannot access
                  /usr/share/cloud/bridge/lib: No such file or directory</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-279</para>
              </entry>
              <entry>
                <para>deleteProject fails when executed by the regular user (works fine for
                  root/domain admin)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-284</para>
              </entry>
              <entry>
                <para>listVirtualMachines does not return deleted machines when zone is
                  specified</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-290</para>
              </entry>
              <entry>
                <para>3.0.0 template also needed for 2.2.14 to 3.0.5 direct upgrade.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-293</para>
              </entry>
              <entry>
                <para>"We do awful, hacky things in our spec file for client"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-304</para>
              </entry>
              <entry>
                <para>Add synchronization for createSnapshot command per host basis</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-309</para>
              </entry>
              <entry>
                <para>iptables rules being deleted from wrong VM after a migration</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-318</para>
              </entry>
              <entry>
                <para>Adding XenServer Host Fails - 6.0.2 fails with 4.0.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-320</para>
              </entry>
              <entry>
                <para>"sessionKey query parameter should be case-insensitive, now only sessionkey is
                  accepted"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-322</para>
              </entry>
              <entry>
                <para>During upgrade displays error - a foreign key constraint fails
                  (`cloud/#sql-f34_6e`..</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-332</para>
              </entry>
              <entry>
                <para>"count" property in list* API response should be equal to how many entries in
                  database, not how many objects in API response</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-333</para>
              </entry>
              <entry>
                <para>When Datacenter name in VCenter has spaces Primary Storage (VMFS) discovery
                  will fail</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-335</para>
              </entry>
              <entry>
                <para>KVM VPC load balancer not working</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-336</para>
              </entry>
              <entry>
                <para>listZones doesn't honour paging</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-343</para>
              </entry>
              <entry>
                <para>"Document what tools and packages are required to build, package and install
                  CloudStack 4.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-346</para>
              </entry>
              <entry>
                <para>Cannot add Vmware cluster with class loader conflict exception</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-347</para>
              </entry>
              <entry>
                <para>listNetworks API: return vlan information only when the caller is ROOT
                  admin</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-348</para>
              </entry>
              <entry>
                <para>deleteNetwork does not clean up network resource count correctly</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-354</para>
              </entry>
              <entry>
                <para>Display of storage statistics is wrong</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-355</para>
              </entry>
              <entry>
                <para>"Fix ""count"" in a bunch of API commands</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-357</para>
              </entry>
              <entry>
                <para>"ISOs can be deleted while still attached to a running VM, and they
                  subsequently cannot be detached from a running VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-359</para>
              </entry>
              <entry>
                <para>PropagateResourceEventCommand failes in cluster configuration</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-361</para>
              </entry>
              <entry>
                <para>Wrong creation of guest networks on a KVM host in Multiple Physical Networks
                  with guest traffic</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-364</para>
              </entry>
              <entry>
                <para>Docs point to download.cloud.com for AWS API script</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-368</para>
              </entry>
              <entry>
                <para>OVM - cannot create guest VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-369</para>
              </entry>
              <entry>
                <para>ASF 4.0 - unable to support XenServer 6.1 host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-373</para>
              </entry>
              <entry>
                <para>"static NAT and Firewall is not working on external firewall device SRX, it
                  needs to be implemented</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-377</para>
              </entry>
              <entry>
                <para>provide deployment config access to marvin's testcase</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-378</para>
              </entry>
              <entry>
                <para>mavenize marvin on master</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-390</para>
              </entry>
              <entry>
                <para>Install Guide: Section 4.5.7 (Prepare the System VM Template): Links go to
                  cloud.com</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-397</para>
              </entry>
              <entry>
                <para>Install Guide: Section 11.1 (Guest Traffic): Diagram is the wrong
                  diagram</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-398</para>
              </entry>
              <entry>
                <para>Install Guide: Section 11.17.3 (Using VPN with Mac OSX): Not complete</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-404</para>
              </entry>
              <entry>
                <para>Update docs on the usage of cloud-setup-database</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-412</para>
              </entry>
              <entry>
                <para>Data truncation: Out of range value for column 'ram' at row </para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-415</para>
              </entry>
              <entry>
                <para>restartNetwork call causes VM to be unreachable when Nicira based SDN is
                  used</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-416</para>
              </entry>
              <entry>
                <para>XCP 1.6beta2 (61002c) - can't add a host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-417</para>
              </entry>
              <entry>
                <para>Handle password server securely to run on port 8080 on VR</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-424</para>
              </entry>
              <entry>
                <para>Updated userdata not propagating to the VR</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-427</para>
              </entry>
              <entry>
                <para>Change hardcoded step number references to dynamic link</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-428</para>
              </entry>
              <entry>
                <para>Storage capacity shown in UI is incorrect</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-435</para>
              </entry>
              <entry>
                <para>Vmware network labels are ignored when creating a Zone using basic
                  networking</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-441</para>
              </entry>
              <entry>
                <para>Running mgmt server using jetty fails to start api server</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-446</para>
              </entry>
              <entry>
                <para>"Host going to alert state, if you are adding already added host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-448</para>
              </entry>
              <entry>
                <para>SSVM bootstrap failure on XenServer hosts with E3 CPU</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-456</para>
              </entry>
              <entry>
                <para>License tag in SPEC isn't what RPM is expecting</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-459</para>
              </entry>
              <entry>
                <para>[Optional Public IP assignment for EIP with Basic Zone] Associate IP Checkbox
                  in Create Network Offering Dialog is Displayed When Elastic LB is Selected</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-462</para>
              </entry>
              <entry>
                <para>A few corrections to make to the 4.0.0 installation guide</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-464</para>
              </entry>
              <entry>
                <para>"Regression in AWSAPI docs, entire sections removed</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-465</para>
              </entry>
              <entry>
                <para>French language file quotes are dropping javascript syntax error</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-467</para>
              </entry>
              <entry>
                <para>Developer's Guide points to cloud.com for API reference</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-479</para>
              </entry>
              <entry>
                <para>UpdateVirtualMachine api fails to propagate userdata to domr</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-481</para>
              </entry>
              <entry>
                <para>Installation Guide Doc Error</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-493</para>
              </entry>
              <entry>
                <para>2.2.x-3.0 DB upgrade support for Advance SG enabled network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-499</para>
              </entry>
              <entry>
                <para>cloudmonkey CLI can't accept complex parameter</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-500</para>
              </entry>
              <entry>
                <para>Passwd-server iptables rules are dropped on domr on fresh start or on
                  reboot.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-501</para>
              </entry>
              <entry>
                <para>Apidocs and marvin does not know how to handle Autoscaling docs.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-504</para>
              </entry>
              <entry>
                <para>Duplicate guest password scripts in codebase.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-507</para>
              </entry>
              <entry>
                <para>fix api docs for listSSHKeyPair</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-508</para>
              </entry>
              <entry>
                <para>CLVM copies template to primary storage unnecessarily.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-510</para>
              </entry>
              <entry>
                <para>Add button not visible when adding public IPs to physical network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-514</para>
              </entry>
              <entry>
                <para>Marvin and Cloudmonkey don't work when an API target uses https or an
                  alternate path.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-518</para>
              </entry>
              <entry>
                <para>API refactoring -- change @Parameter annotation and remove the @IdentityMapper
                  annotation.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-520</para>
              </entry>
              <entry>
                <para>Dependency jar names mismatch with install-non-oss.sh</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-521</para>
              </entry>
              <entry>
                <para>Build will hung up when doing test for TestAgentShell</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-522</para>
              </entry>
              <entry>
                <para>Log requests in cloudmonkey's log file.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-527</para>
              </entry>
              <entry>
                <para>List API performance optimization by using DB views and removing UUID
                  conversion.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-534</para>
              </entry>
              <entry>
                <para>Failed to add host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-536</para>
              </entry>
              <entry>
                <para>remove citrix cloudpatform from 4.0 build - CloudStack is ASF project.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-539</para>
              </entry>
              <entry>
                <para>Cropped Text in UI under Quick View.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-552</para>
              </entry>
              <entry>
                <para>]Quick view details for a volume displays scroll bar in place of name of the
                  volume when the name of the volume has more no of characters.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-553</para>
              </entry>
              <entry>
                <para>"SRX - When adding SRX device make "Public Network" - default to "untrusted"
                  and "Private Network" - default to "trusted" as un-editable fields.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-556</para>
              </entry>
              <entry>
                <para>Erratic window behavior in Quick View tooltip.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-559</para>
              </entry>
              <entry>
                <para>source code import problem</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-560</para>
              </entry>
              <entry>
                <para>Usage server doesn't work in 4.0.0 due to missing db changes</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-572</para>
              </entry>
              <entry>
                <para>SG Enabled Advanced Zone - Not able to deploy a VM in an account specific
                  shared network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-573</para>
              </entry>
              <entry>
                <para>"NPE at
                  ""com.cloud.network.NetworkManagerImpl.networkOfferingIsConfiguredForExternalNetworking(NetworkManagerImpl.java:4345)""
                  when create network from the network offering having NULL provider for the
                  service</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-578</para>
              </entry>
              <entry>
                <para>The already deleted same hostname is not deleted from /etc/hosts of
                  vRouter</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-584</para>
              </entry>
              <entry>
                <para>"typos in
                  ""Apache_CloudStack-4.0.0-incubating-CloudStack_Nicira_NVP_Guide-en-US""</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-590</para>
              </entry>
              <entry>
                <para>Incorrect Network Gateways Assigned to System VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-592</para>
              </entry>
              <entry>
                <para>"API bloat, unknown apis cmd classes</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-593</para>
              </entry>
              <entry>
                <para>"2 guest network, auto create vlan error</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-596</para>
              </entry>
              <entry>
                <para>DeployVM command takes a lot of time to return job id.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-599</para>
              </entry>
              <entry>
                <para>DhcpEntryCommand fails on Router VM on CS4.0 and vSphere5 with Advanced
                  Network Zone.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-600</para>
              </entry>
              <entry>
                <para>When rebooting KVM local storage VM host, libvirt definitions deleted</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-605</para>
              </entry>
              <entry>
                <para>Host physical CPU is incorrectly calculated for Vmware host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-606</para>
              </entry>
              <entry>
                <para>Starting VM fails with 'ConcurrentOperationException' in a clustered MS
                  scenario</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-614</para>
              </entry>
              <entry>
                <para>"ListTemplates API is not returning ""Enable SSH Key"" attribute for any given
                  template</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-617</para>
              </entry>
              <entry>
                <para>Unable to edit a Sub domain</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-639</para>
              </entry>
              <entry>
                <para>API Refactoring: Adapters for ACL</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-648</para>
              </entry>
              <entry>
                <para>The normal users could change their own login password.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-660</para>
              </entry>
              <entry>
                <para>Network Traffic Labels are not functional in Marvin</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-683</para>
              </entry>
              <entry>
                <para>Image Is Missing in the Accessing VM Section</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-689</para>
              </entry>
              <entry>
                <para>RVR: Stop pending flag is not cleared when user start the disconnected router
                  from another host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-691</para>
              </entry>
              <entry>
                <para>A warning dialog box shows after reloading the welcome page.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-693</para>
              </entry>
              <entry>
                <para>Adding a VPC virtual router to a NiciraNVP enabled network fails.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-694</para>
              </entry>
              <entry>
                <para>"Create a new VPC network offering with "connectivity" option needed for SDN
                  networking) is not allowed / VPC support for SDN networks</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-717</para>
              </entry>
              <entry>
                <para>cloudmonkey fails to parse/print response.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-720</para>
              </entry>
              <entry>
                <para>Fail to load a png image when accessing the web console.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-721</para>
              </entry>
              <entry>
                <para>Bytes sent/received in user statistics is empty (CloudStack 4.0)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-725</para>
              </entry>
              <entry>
                <para>UI: Error when the Egress rules tab is selected for a network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-734</para>
              </entry>
              <entry>
                <para>api_refactoring: CreateAccountCmd fails to send response due to NPE in service
                  layer</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-735</para>
              </entry>
              <entry>
                <para>Integration smoke tests: Fix expunge vm test on api_refactoring</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-736</para>
              </entry>
              <entry>
                <para>Integration smoke tests: Fix check for vm name for the deployvm smoke
                  test.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-793</para>
              </entry>
              <entry>
                <para>"Create cloudmonkey-helper, a plugin that helps autodiscover and sync api info
                  via an api over some endpoint</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-798</para>
              </entry>
              <entry>
                <para>Move usage related cmd classes from cloud-server to cloud-api</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-799</para>
              </entry>
              <entry>
                <para>[Load Test] Check router statistics falls behind in gathering stats by more
                  than 2 times the set value</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-819</para>
              </entry>
              <entry>
                <para>Create Account/User API logging password in access log</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-863</para>
              </entry>
              <entry>
                <para>Non-printable characters (ASCII control character) such as %00 or %0025 are
                  getting stored in raw/non encoded form in the database</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-870</para>
              </entry>
              <entry>
                <para>Client UI: Wrong character encoding for some language</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-928</para>
              </entry>
              <entry>
                <para>[Simulator] Latency for Agent Commands - change unit of wait from seconds to
                  milliseconds</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-938</para>
              </entry>
              <entry>
                <para>s2s VPN trouble</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-959</para>
              </entry>
              <entry>
                <para>Missing sub-sections in document section System Service Offering</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-968</para>
              </entry>
              <entry>
                <para>marvin: vlan should be an attribute of the physical_network and not the
                  zone</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-977</para>
              </entry>
              <entry>
                <para>Document how to use openvswitch with KVM hypervisor</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-978</para>
              </entry>
              <entry>
                <para>TypeError: instance.displayname is undefined while adding VM's to the LB
                  rule</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-985</para>
              </entry>
              <entry>
                <para>Different MAC address for RvR caused issue in short term network outage</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-987</para>
              </entry>
              <entry>
                <para>Sections missing in Working With Snapshots</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-993</para>
              </entry>
              <entry>
                <para>"admin"" user is not getting created when management server is started.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-995</para>
              </entry>
              <entry>
                <para>Not able to add the KVM host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1002</para>
              </entry>
              <entry>
                <para>Not able to start VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1006</para>
              </entry>
              <entry>
                <para>need to disable service libvirt-guests in CentOS packaging RPMs, or in
                  installation docs</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1008</para>
              </entry>
              <entry>
                <para>"Egress"" tab should not be presented in the UI for Shared Networks</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1010</para>
              </entry>
              <entry>
                <para>Host count and Secondary storage count always shows 1 in UI</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1011</para>
              </entry>
              <entry>
                <para>KVM host getting disconnected in cluster environment</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1013</para>
              </entry>
              <entry>
                <para>running cloudstack overwrites default public/private ssh key</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1014</para>
              </entry>
              <entry>
                <para>Merge ManagementServer and ManagementServerEx</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1016</para>
              </entry>
              <entry>
                <para>Not able to deploy VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1021</para>
              </entry>
              <entry>
                <para>the vlan is not creat to right nic. when i creat multi guest network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1024</para>
              </entry>
              <entry>
                <para>Regression: Unable to add Xenserver host with latest build.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1027</para>
              </entry>
              <entry>
                <para>"Update SSL certificate" button should properly reflect its
                  functionality</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1029</para>
              </entry>
              <entry>
                <para>Enter the token to specified project is malfunctioned</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1037</para>
              </entry>
              <entry>
                <para>"Make cloudmonkey awesome-er: Online help docs and api discovery, better
                  colored output, parameter value autocompletion</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1050</para>
              </entry>
              <entry>
                <para>No Documentation on Adding a Load Balancer Rule</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1051</para>
              </entry>
              <entry>
                <para>API dispatcher unable to find objectVO corresponding to
                  DeleteTemplatecmd</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1055</para>
              </entry>
              <entry>
                <para>"The overlay still exists when the ""Recurring Snapshots"" dialog is canceled
                  by pressing esc key.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1056</para>
              </entry>
              <entry>
                <para>S3 secondary storage fails to upload systemvm template due to KVMHA
                  directory</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1057</para>
              </entry>
              <entry>
                <para>regression of changeServiceForVirtualMachine API - fails to find service
                  offering by serviceOfferingId parameter</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1063</para>
              </entry>
              <entry>
                <para>"SG Enabled Advanced Zone - "Add Guest Networks" - When user tries to add a
                  guest Network with scope as "Account" he should NOT be presented with "Offering
                  for shared security group enabled"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1064</para>
              </entry>
              <entry>
                <para>A type error occurs when trying to add account/register template...</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1068</para>
              </entry>
              <entry>
                <para>Names in VR list is useless</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1070</para>
              </entry>
              <entry>
                <para>javelin: NPE on executing registerIso API</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1071</para>
              </entry>
              <entry>
                <para>Netscaler element is not getting loaded as part of LoadBalancing Service
                  Providers</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1078</para>
              </entry>
              <entry>
                <para>Not able to start System Vms on Rhel 6.3 KVM host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1079</para>
              </entry>
              <entry>
                <para>Deploying AWSAPI with mvn -pl :cloud-awsapi jetty:run fail</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1082</para>
              </entry>
              <entry>
                <para>UI doesn't throw any error message when trying to delete ip range from a
                  network that is in use.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1083</para>
              </entry>
              <entry>
                <para>listUsageRecords api: removed project results in NPE</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1087</para>
              </entry>
              <entry>
                <para>Update the Developer Guide for ASFCS 4.1 Release</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1088</para>
              </entry>
              <entry>
                <para>EnableStaticNat error will clear the data in database</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1094</para>
              </entry>
              <entry>
                <para>Ipv6 - hostname/hostname --fqdn does not return the name of the VM. But i am
                  able to reach the Vm using their names</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1095</para>
              </entry>
              <entry>
                <para>Ipv6 - dhclient command needs to be run manually on the Vms to get the Ipv6
                  address</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1100</para>
              </entry>
              <entry>
                <para>Expunge thread is not kicked off based on global configuration if the global
                  setting is less than 60 seconds</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1103</para>
              </entry>
              <entry>
                <para>"IpV6 - listNetwork() command does not retrun gateway,netmask,cidr</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1104</para>
              </entry>
              <entry>
                <para>Ipv6 - listVlanIpRanges() returns error 530</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1105</para>
              </entry>
              <entry>
                <para>"IpV6 - listVirtualMachines() does not return netmask,
                  gateway,ipaddress.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1107</para>
              </entry>
              <entry>
                <para>Ipv6 - Unable to extend Ip range for a Ipv6 network using craeteVlanIpRange()
                  command - Error code 530 returned</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1108</para>
              </entry>
              <entry>
                <para>Ipv6 - Not able to restart Networks</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1109</para>
              </entry>
              <entry>
                <para>"Ipv6 - Unable to expunge User Vms that are "Destroyed".</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1111</para>
              </entry>
              <entry>
                <para>Ipv6 - listRouters() does not return guestipaddress/</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1112</para>
              </entry>
              <entry>
                <para>"Errors in "Prepare the System VM Template"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1113</para>
              </entry>
              <entry>
                <para>"Ipv6 - Not able to deploy a new VM in this network because of "Unable to
                  allocate Unique Ipv6 address"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1114</para>
              </entry>
              <entry>
                <para>unable to execute listegressfirewallrules API due invalid value id</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1115</para>
              </entry>
              <entry>
                <para>In multiple shared network unable to login with default nic - KVM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1123</para>
              </entry>
              <entry>
                <para>ListStoragePools API broken by refactor</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1138</para>
              </entry>
              <entry>
                <para>"Providing invalid values for gateway, netmask etc in the zoneWizard blocks
                  the VLAN container to load, throwing an error</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1139</para>
              </entry>
              <entry>
                <para>"After the Vm is "Expunged" we see the entry still being present in the router
                  in /etc/dhcphosts.txt</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1141</para>
              </entry>
              <entry>
                <para>"Ipv6 - After network restart (and reboot router), we do not see the existing
                  vms dnsentries not being programmed in the router.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1152</para>
              </entry>
              <entry>
                <para>Missing tag in host-add.xml</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1153</para>
              </entry>
              <entry>
                <para>"Ipv6 - Vm deployment fails with "n must be positive" error.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1154</para>
              </entry>
              <entry>
                <para>Account/Users related API failed due to RegionService inject exception.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1157</para>
              </entry>
              <entry>
                <para>No API Documentation on Listing Custom User Templates Using CS4 API</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1160</para>
              </entry>
              <entry>
                <para>References to version=3.0.3|4|5|6 in API classes needs to be removed.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1161</para>
              </entry>
              <entry>
                <para>Differences between 4.1 and master in
                  ongoing-config-of-external-firewalls-lb.xml</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1163</para>
              </entry>
              <entry>
                <para>Failed with NPE while creating firewall rule</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1168</para>
              </entry>
              <entry>
                <para>Create firewall rule broke</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1173</para>
              </entry>
              <entry>
                <para>ConsoleProxyResource instantiation exception.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1174</para>
              </entry>
              <entry>
                <para>Snapshots related SQL error.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1176</para>
              </entry>
              <entry>
                <para>Issue with snapshots(create/list)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1181</para>
              </entry>
              <entry>
                <para>mvn deploy db failing with NPE</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1190</para>
              </entry>
              <entry>
                <para>Make APIChecker interface throw a single sensible exception.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1200</para>
              </entry>
              <entry>
                <para>"Unknown column 'vm_instance.disk_offering_id' in table vm_instance, db
                  exception shown in MS log</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1201</para>
              </entry>
              <entry>
                <para>"Failed to create ssh key for user "cloud"
                  /var/lib/cloud/management/.ssh/id_rsa and failed to start management server</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1202</para>
              </entry>
              <entry>
                <para>Fail to install KVM cloud-agent.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1203</para>
              </entry>
              <entry>
                <para>Fail to create advance zone with SG enabled when UI allows SG enabled
                  option.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1204</para>
              </entry>
              <entry>
                <para>Fail to create advance zone due to fail to add host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1205</para>
              </entry>
              <entry>
                <para>Ipv6 - Ubuntu 12.10 guest Vms loses default route (after it expiration time ~
                  30 mts) when ipv6.autoconfig parameters are disabled except for
                  net.ipv6.conf.lo.autoconf which is enabled.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1206</para>
              </entry>
              <entry>
                <para>Failure in Copy of System template</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1210</para>
              </entry>
              <entry>
                <para>Make all pluggable services return list of api cmd classes</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1216</para>
              </entry>
              <entry>
                <para>UUID is null for admin and failed to register user key with 4.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1218</para>
              </entry>
              <entry>
                <para>"IPv6: Shared Network - After network restart with clean option, router is
                  assigned a different address. Name resolution for the existing guest Vms in the
                  network fails.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1219</para>
              </entry>
              <entry>
                <para>Ipv6 - Provide better error messages when deploying a Vm with Ip an address
                  that is outside the network's ip range / if the ip address already is assigned to
                  another Vm</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1220</para>
              </entry>
              <entry>
                <para>Ipv6 - Better error message when deploy Vm fails to get a free Ip
                  address</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1222</para>
              </entry>
              <entry>
                <para>API rate limit configs: removed double quote in upgrade script</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1223</para>
              </entry>
              <entry>
                <para>Exception while starting jetty server:
                  org.springframework.beans.factory.BeanCreationException Error creating bean with
                  name 'apiServer'</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1224</para>
              </entry>
              <entry>
                <para>Volume snapshot creation failing</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1226</para>
              </entry>
              <entry>
                <para>Error while running Cloudstack-setup-database</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1228</para>
              </entry>
              <entry>
                <para>Unable to Create System Vm's in the VMware Hypervisor setup</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1229</para>
              </entry>
              <entry>
                <para>Incorrect SQL syntax to insert api limit related configuration items in
                  upgrade path script.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1231</para>
              </entry>
              <entry>
                <para>cloud-install-sys-tmplt failed due to missing path</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1232</para>
              </entry>
              <entry>
                <para>"Ipv6 - Guest Vms are not able to get Ipaddress when executing dhclient
                  command when using ""/96"" network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1233</para>
              </entry>
              <entry>
                <para>Veewee configuration files are inappropriately identified as ASLv2 licensed
                  file</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1234</para>
              </entry>
              <entry>
                <para>Unable to start KVM agent with 4.1 build.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1237</para>
              </entry>
              <entry>
                <para>"Register Template fails with ""Cannot find template adapter for
                  XenServer""</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1239</para>
              </entry>
              <entry>
                <para>Unable to registerISO :unhandled exception executing api command:
                  registerIso</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1240</para>
              </entry>
              <entry>
                <para>Unable to registerTemplate : Cannot find template adapter for
                  XenServer.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1241</para>
              </entry>
              <entry>
                <para>Network apply rules logic is broken.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1242</para>
              </entry>
              <entry>
                <para>[F5-SRX-InlineMode] Failed to create LB rule with F5-SRX inlinemode
                  deployment</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1243</para>
              </entry>
              <entry>
                <para>Failed to cleanup account :java.lang.NullPointerException</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1244</para>
              </entry>
              <entry>
                <para>fail to push sysmvm.iso onto xen host</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1246</para>
              </entry>
              <entry>
                <para>"[ ALU beta CS 4.1 build2] ""Guest network"" missing in Add Zone wizard ( step
                  3, Setup Network \ Physical Network)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1251</para>
              </entry>
              <entry>
                <para>Baremetal zone doesn't need primary/secondary storage in UI wizard.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1252</para>
              </entry>
              <entry>
                <para>Failed to download default template in VMware.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1260</para>
              </entry>
              <entry>
                <para>Failed to register template: Unable to find template adapter</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1261</para>
              </entry>
              <entry>
                <para>Cannot find template adapter for XenServer.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1262</para>
              </entry>
              <entry>
                <para>"Failed to Prepare Secondary Storage in VMware,</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1265</para>
              </entry>
              <entry>
                <para>logrotate dnsmasq configuration is wrong</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1267</para>
              </entry>
              <entry>
                <para>KVM's cloudstack-agent service doesn't log (log4j)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1269</para>
              </entry>
              <entry>
                <para>Failed to start CPVM java.lang.NullPointerException Unable to start
                  SSVM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1272</para>
              </entry>
              <entry>
                <para>Autoscale: createAutoScaleVmProfile fails due to unable to retrieve Service
                  Offering ip</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1274</para>
              </entry>
              <entry>
                <para>UpdateNetworkCmd throws NP</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1276</para>
              </entry>
              <entry>
                <para>Remove autoscanning for 4.1</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1277</para>
              </entry>
              <entry>
                <para>ApiResponseHelper.createUserVmResponse failed to populate password field set
                  from UserVm object</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1278</para>
              </entry>
              <entry>
                <para>Improper permissions on injectkeys.sh</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1288</para>
              </entry>
              <entry>
                <para>[F5-SRX-InlineMode] classCastException during network restart with cleanup
                  option true</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1289</para>
              </entry>
              <entry>
                <para>[F5-SRX-InlineMode] Usage stats are not generated for Juniper SRX Firewall in
                  inlinemode</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1290</para>
              </entry>
              <entry>
                <para>listNetoworks API takes too long to respond</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1292</para>
              </entry>
              <entry>
                <para>"[F5-SRX-InlineMode] Update network from SRX,F5 as service provideds to VR as
                  service provider does not delete firewall rules from SRX</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1295</para>
              </entry>
              <entry>
                <para>NPE in usage parsers due to missing @Component inject</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1299</para>
              </entry>
              <entry>
                <para>Errors in 4.5.5 section of installation guide</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1300</para>
              </entry>
              <entry>
                <para>section in wrong order in installation guide</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1303</para>
              </entry>
              <entry>
                <para>Ipv6 - java.lang.NullPointerException when executing listnetworks() and
                  deployVirtualMachine() after extending the Ipv4 range of a dual stack
                  network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1307</para>
              </entry>
              <entry>
                <para>Noticed NPE when we put host in maintenance mode in clustered management
                  setup</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1310</para>
              </entry>
              <entry>
                <para>ASF-build-master-nonoss-rhel63 - create advance zone FAIL -
                  CreatePhysicalNetworkCmd FAIL - MySQLIntegrityConstraintViolationException:
                  Duplicate entry '200-Public' for key 'physical_network_id'</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1312</para>
              </entry>
              <entry>
                <para>"Fix rolling upgrades from 4.0 to 4.1 in 4.1 release, fix db schemas to be
                  same as 4.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1313</para>
              </entry>
              <entry>
                <para>Working with Volumes Section Is Missing</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1315</para>
              </entry>
              <entry>
                <para>[F5-SRX-InlineMode] Network implement failed with Run time Exception during
                  network upgrade from VR to SRX-F5</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1319</para>
              </entry>
              <entry>
                <para>createCustomerVpnGateway response gives TypeError:
                  json.createvpncustomergatewayresponse is undefined</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1320</para>
              </entry>
              <entry>
                <para>Routers naming convention is changed to hostname.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1321</para>
              </entry>
              <entry>
                <para>[Site-to-Site VPN] No events are generated in case of status change in site to
                  site vpn connection</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1326</para>
              </entry>
              <entry>
                <para>KVM - Failed to start cloud agent from SSVM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1328</para>
              </entry>
              <entry>
                <para>console view unable to connect - CPVM SSVM guest VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1329</para>
              </entry>
              <entry>
                <para>"API listRouters response returns hostname instead of Virtual Routers, UI
                  displays host entry for each VR</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1330</para>
              </entry>
              <entry>
                <para>ec2-run-instances - When -n option is used to deploy multiple Vms API returns
                  error even though few of the Vms have been deployed successfully</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1331</para>
              </entry>
              <entry>
                <para>Upgrade fails for a 2.2.14 Zone having multiple guest networks using
                  network_tags and Public Vlan</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1332</para>
              </entry>
              <entry>
                <para>IPV6 - Router and guest Vms should be able to use an IPV6 address for external
                  DNS entry</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1334</para>
              </entry>
              <entry>
                <para>vmware.root.disk.controller doesn't work</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1337</para>
              </entry>
              <entry>
                <para>Zone to zone template/ISO copy fails and template/ISO download also
                  fail</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1338</para>
              </entry>
              <entry>
                <para>Deploy VM failed using IS</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1339</para>
              </entry>
              <entry>
                <para>ASF 4.1: Management server becomes unresponsive</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1341</para>
              </entry>
              <entry>
                <para>URL for the KEYs file is wrong in the installation guide</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1342</para>
              </entry>
              <entry>
                <para>Document installation and usage of cloudmonkey for 4.1 docs</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1343</para>
              </entry>
              <entry>
                <para>Porting Baremetal related UI changes to ACS</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1344</para>
              </entry>
              <entry>
                <para>Typo in use.external.dns setting description</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1345</para>
              </entry>
              <entry>
                <para>BigSwitch plugin introduces 'VNS' isolation in UI without backend
                  implementation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1346</para>
              </entry>
              <entry>
                <para>"Check to see if external devices are used in the network, is hardcoded for
                  specific devices</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1347</para>
              </entry>
              <entry>
                <para>"Not able to delete network. Error - "Unable to insert queue item into
                  database, DB is full?"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1348</para>
              </entry>
              <entry>
                <para>API/UI: zoneObj is undefined.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1349</para>
              </entry>
              <entry>
                <para>"VPC network Adding Network ACls, PF rules - Unable to insert queue item into
                  database, DB is full? PF rules and NW Acls in Add state in DB</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1350</para>
              </entry>
              <entry>
                <para>Management server Stop and start causes previously downloaded ISOs and
                  templates to redownload &amp; reinstall.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1353</para>
              </entry>
              <entry>
                <para>KVM 6.3 snapshot Scheduling snapshot failed due to
                  java.lang.NullPointerException</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1357</para>
              </entry>
              <entry>
                <para>"Autoscale: Provisioned VMs from Netscaler not being added to lb vserver,
                  provserver fails with provserver_err_asynctaskpoll</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1360</para>
              </entry>
              <entry>
                <para>The clusterid field of the createStoragePool API command should be documented
                  as required.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1367</para>
              </entry>
              <entry>
                <para>NPE noticed in logs while AgentMonitor is monitoring the host ping
                  interval</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1368</para>
              </entry>
              <entry>
                <para>Shared network - Not able to delete network because of
                  java.lang.NullPointerException</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1369</para>
              </entry>
              <entry>
                <para>"Ipv6 - In dual Stack network, guest VM does not have the Ipv6 address of the
                  router programmed in /etc/resolv.conf for DNS resolution.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1370</para>
              </entry>
              <entry>
                <para>DeployVM Fail - VPC or non-VPC network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1375</para>
              </entry>
              <entry>
                <para>deploydb failing with acs master</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1376</para>
              </entry>
              <entry>
                <para>Unable to migrate VM due to internal error process exited while connecting to
                  monitor</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1377</para>
              </entry>
              <entry>
                <para>HA fail - when host is shutdown, VMs and SSVMs are not failover to second host
                  in cluster.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1382</para>
              </entry>
              <entry>
                <para>vm deploy fails with Error "cannot find DeployPlannerSelector for vm"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1383</para>
              </entry>
              <entry>
                <para>Deploying basic zone on 4.1 fails in NPE</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1386</para>
              </entry>
              <entry>
                <para>BASIC zone SSVM fail to start due to exception</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1388</para>
              </entry>
              <entry>
                <para>UI - ListUsers doesnt display any User except the Default Root Admin
                  User</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1391</para>
              </entry>
              <entry>
                <para>EventBus is not getting injected after javelin merge</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1394</para>
              </entry>
              <entry>
                <para>[F5-SRX-InlineMode] Failure in static nat configuration on SRX does not result
                  in LB configuration error in CS during LB rule configuration</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1397</para>
              </entry>
              <entry>
                <para>Static Nat configuration is failing with NPE</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1399</para>
              </entry>
              <entry>
                <para>Unhandled exception executing api command: stopVirtualMachine</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1402</para>
              </entry>
              <entry>
                <para>listRouters API response doesn't return linklocal IP and public IP
                  details</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1403</para>
              </entry>
              <entry>
                <para>Storage and console-proxy related error</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1411</para>
              </entry>
              <entry>
                <para>Issues with VMWare Hypervisor host_ids not updated when ESX(i) crashes in
                  instance table</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1414</para>
              </entry>
              <entry>
                <para>Redundant router: BACKUP switch cancelled due to lock timeout after a glitch
                  in network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1417</para>
              </entry>
              <entry>
                <para>When invalid values are passed to createNetwork(), error message does not
                  indicate the parameter name that has invalid values.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1418</para>
              </entry>
              <entry>
                <para>As regular user, we are not allowed to deploy VM on a shared network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1419</para>
              </entry>
              <entry>
                <para>Apache-ify and apply trademark logos in the UI</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1420</para>
              </entry>
              <entry>
                <para>Ensure trademarks are properly attributed in publican brand</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1423</para>
              </entry>
              <entry>
                <para>Unable to launch UI [HTTP Status 404].</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1425</para>
              </entry>
              <entry>
                <para>unhandled exception executing api command: migrateVirtualMachine &amp;
                  recoverVirtualMachine</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1427</para>
              </entry>
              <entry>
                <para>Failed to delete Guestnetwork which has LB with Netscaler</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1428</para>
              </entry>
              <entry>
                <para>[UI] Instance which are created without display name are not visible when
                  added to LB</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1429</para>
              </entry>
              <entry>
                <para>single account is unable to use same vnet across multiple physical
                  network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1436</para>
              </entry>
              <entry>
                <para>4.1 management server fails to start from RPM build artifact</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1443</para>
              </entry>
              <entry>
                <para>As domain admin we are allowed to create shared network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1446</para>
              </entry>
              <entry>
                <para>[UI]VPC Router type should be of type vpc and not system</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1447</para>
              </entry>
              <entry>
                <para>[UI]Persistent Status is not displayed for VPC Tier</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1449</para>
              </entry>
              <entry>
                <para>listAccounts and listProjectAccounts API lists all the users not
                  account-specific users for each account returned</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1451</para>
              </entry>
              <entry>
                <para>Getting EntityExistsException while creating more than one project in CS
                  4.1</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1452</para>
              </entry>
              <entry>
                <para>Public IP's are assigned to private interface with VPC Restart [PF/LB rules
                  are not functional</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1461</para>
              </entry>
              <entry>
                <para>"Ipv6 - From a Vm that that is part of 2 networks, non default network
                  router's details should not get programmed in the DNS entries of the guest
                  VM.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1463</para>
              </entry>
              <entry>
                <para>IPV6 - Ubuntu 12.10 - Multiple Nic - IPV6 address is assigned automatically
                  for 1 nic only. Need to do a manual dhclient request to get the ipv6 for other
                  nic.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1464</para>
              </entry>
              <entry>
                <para>"IPV6 - Multi nic - Ubuntu 1210 -When Vm is stopped and started/ rebooted, i
                  get multiple global IPV6 addresses being allocated for one of the nics.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1465</para>
              </entry>
              <entry>
                <para>List Zones returns null under create instance when logged is as user</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1467</para>
              </entry>
              <entry>
                <para>Failed to create Volume for the System VMs</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1469</para>
              </entry>
              <entry>
                <para>kvm agent: agent service fails to start up</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1470</para>
              </entry>
              <entry>
                <para>unhandled exception executing api command: deployVirtualMachine</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1472</para>
              </entry>
              <entry>
                <para>AssignVirtualMachine API with wrong Virtual Instance ID failed with NPE</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1473</para>
              </entry>
              <entry>
                <para>deleteDomain is failing with NPE</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1481</para>
              </entry>
              <entry>
                <para>"IPV6 - When Vm is part of 1 dual network and 1 ipv6 network, name resolution
                  using fqdn fails for the ipv6 network.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1482</para>
              </entry>
              <entry>
                <para>IPV6 - We are not allowed to create a shared IPV6 network with a VLAN which
                  already is associated with a IPV4 network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1484</para>
              </entry>
              <entry>
                <para>API Throttling : api.throttling.enabled, Global setting missing</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1485</para>
              </entry>
              <entry>
                <para>Add Baremetal Provider back to 4.1 branch</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1487</para>
              </entry>
              <entry>
                <para>cloudstack-setup-agent fails to set private.network.device on KVM host
                  add</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1488</para>
              </entry>
              <entry>
                <para>"Ipv6 - When Vm is deployed as part of multiple networks, one of the IPV6
                  address assigned to guest VM is lost.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1490</para>
              </entry>
              <entry>
                <para>4.1 deb management fails to start due to tomcat dep problem</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1496</para>
              </entry>
              <entry>
                <para>List API Performance: listAccounts failing with OOME for high values of
                  pagesize (>1000) </para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1499</para>
              </entry>
              <entry>
                <para>ListAPI Performance for few APIs not as good as it was before API
                  optimization</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1503</para>
              </entry>
              <entry>
                <para>listHypervisor API not getting fired when logged in as User</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1505</para>
              </entry>
              <entry>
                <para>Unknown column 'domain.region_id' in 'field list'</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1509</para>
              </entry>
              <entry>
                <para>Failed to implement network elements and resources while provisioning for
                  persistent network(createVlanIpRange to an account</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1511</para>
              </entry>
              <entry>
                <para>[UI] Instances NIC details does not have Network Name</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1512</para>
              </entry>
              <entry>
                <para>[UI] Wrong message[message.configure.all.traffic.types] when trying to create
                  zone with mulitple physical networks without providing the traffic label</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1515</para>
              </entry>
              <entry>
                <para>None of the cloudstack packges are marked for upgrade when tried to upgrade
                  from.4.0/4.0.1 to 4.1</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1516</para>
              </entry>
              <entry>
                <para>Create documentation in languages that have translations available</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1517</para>
              </entry>
              <entry>
                <para>Check UI in languages available</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1521</para>
              </entry>
              <entry>
                <para>Redundant router: Services are not stopped when switch to BACKUP state</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1526</para>
              </entry>
              <entry>
                <para>Template registration fails in the VMware Setup</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1531</para>
              </entry>
              <entry>
                <para>vmware create volume from snapshot will missing date</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1537</para>
              </entry>
              <entry>
                <para>Restart network with clean up set to true causes Autoscaled LB rule to get
                  mangled and unusable</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1541</para>
              </entry>
              <entry>
                <para>NPE while deleting snapshot :Unexpected exception while executing
                  org.apache.cloudstack.api.command.user.snapshot.DeleteSnapshotCmd</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1542</para>
              </entry>
              <entry>
                <para>unhandled exception while creating project</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1544</para>
              </entry>
              <entry>
                <para>The description and the response format for the deleteUser command are
                  incorrect</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1550</para>
              </entry>
              <entry>
                <para>createaccountresponse returns more than the user you requested for
                  creation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1553</para>
              </entry>
              <entry>
                <para>AWS Regions-Not able to list accounts from the 2nd region after
                  user/account/domain details have been manually synced up from first region</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1555</para>
              </entry>
              <entry>
                <para>"AWS Regions - userapikey and usersecretkey parameters are not returned in the
                  response of addRegion, updateRegion listRegion api calls..</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1557</para>
              </entry>
              <entry>
                <para>EC2 REST API : cloudbridge database is missing on the CloudStack
                  Installation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1562</para>
              </entry>
              <entry>
                <para>Replace the short-cut solution of supportting @DB with the formal one</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1565</para>
              </entry>
              <entry>
                <para>"Used Master Branch System VM Template: Default Route on the System VMs
                  (SSVM,CPVM and VR) is missing</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1566</para>
              </entry>
              <entry>
                <para>Baremetal API addBaremetalPxePingServer fail to add PXE PING server to
                  deployment causing create instance with PING style image to fail</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1569</para>
              </entry>
              <entry>
                <para>"AWS Regions - Not able to Edit domain/account/user from a region that is not
                  the owner region.""The content of elements must consist of well-formed character
                  data or markup."" - error message presented to the user.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1571</para>
              </entry>
              <entry>
                <para>"AWS Regions - When deleting domain/account/user from a region that is not the
                  owner, the request is not being forwarded to the owner region.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1574</para>
              </entry>
              <entry>
                <para>updateResourceCount API is failed saying to specify valida resource type even
                  after parsing the valid resource type</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1583</para>
              </entry>
              <entry>
                <para>AWS Regions - RabbitMQ Server did not recieve any event notification during
                  account creation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1587</para>
              </entry>
              <entry>
                <para>Basic zone - CPVM fail to go to running state, Exception while trying to start
                  secondary storage vm</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1588</para>
              </entry>
              <entry>
                <para>AWS Regions - When registerUserKeys() is called for a user from a region that
                  is not the owner, it is handled by this region.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1600</para>
              </entry>
              <entry>
                <para>Typo in dpkg-buildpackage command</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1604</para>
              </entry>
              <entry>
                <para>deploy VM failed when global setting "vm.allocation.algorithm" is set to
                  "userdispersing</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1615</para>
              </entry>
              <entry>
                <para>"VMware Cluster discovery fails with if ESXi version is 5.0 Update 1, build
                  721882</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1620</para>
              </entry>
              <entry>
                <para>Cannot provision CentOS 6 VMs on XenServer 6.1</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1621</para>
              </entry>
              <entry>
                <para>listProjectInvitations fails with NPE for valid request</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1624</para>
              </entry>
              <entry>
                <para>API is not returning response in details:UI is also not returning any
                  output</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1625</para>
              </entry>
              <entry>
                <para>NPE with updateResourceCount when &amp;&amp; is passed thru API</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1630</para>
              </entry>
              <entry>
                <para>4.0.x cloud-aws-api not properly obsoleted</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1631</para>
              </entry>
              <entry>
                <para>4.1 RPM packaging broken</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1636</para>
              </entry>
              <entry>
                <para>AWS Regions - Remove the concept of having an owner region for
                  domain/account/user objects</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1642</para>
              </entry>
              <entry>
                <para>Add support CentOS 6.4</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1648</para>
              </entry>
              <entry>
                <para>Unable to add KVM host.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1649</para>
              </entry>
              <entry>
                <para>vmware vm os type error</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1651</para>
              </entry>
              <entry>
                <para>agent scripts still pointing to /var/log/cloud</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1656</para>
              </entry>
              <entry>
                <para>NicResponses in a UserVmResponse are not preserving the natural order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1663</para>
              </entry>
              <entry>
                <para>AWS Regions - Events - There are no events being generated when a new domain
                  is added/edited</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1664</para>
              </entry>
              <entry>
                <para>Action Events are not logged due to spring change</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1665</para>
              </entry>
              <entry>
                <para>AWS Regions - Events - There are no events being generated when a new user is
                  added/edited/enabled/deleted/password changes/api &amp; secret keys are
                  generated</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1666</para>
              </entry>
              <entry>
                <para>KVM VPC NetworkUsage does not work</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1668</para>
              </entry>
              <entry>
                <para>IP conflict in VPC tier</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1671</para>
              </entry>
              <entry>
                <para>AWS Regions - Events - Domain Delete event does not include the UUID of the
                  domain that was deleted</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1674</para>
              </entry>
              <entry>
                <para>AWS Regions - Events - Account Deletion event does not include the UUID of the
                  account deleted</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1681</para>
              </entry>
              <entry>
                <para>Upgrade instructions mention incorrect name and description of systemvm-vmware
                  template in registering template section</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1684</para>
              </entry>
              <entry>
                <para>"api.throttling.enabled configuration setting should be set to ""false"" in
                  Config.java</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1688</para>
              </entry>
              <entry>
                <para>AWS Regions - Domain admin user is not able to use getUser() command to fetch
                  user details</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1690</para>
              </entry>
              <entry>
                <para>NPE from API server when starting mgmt server</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1694</para>
              </entry>
              <entry>
                <para>Issues to start/access Management Server after upgrade from 4.0 to 4.1</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1697</para>
              </entry>
              <entry>
                <para>Six DB tables are not available with upgraded setup(4.0 to 4.1) when compare
                  to 4.1 newly installation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1706</para>
              </entry>
              <entry>
                <para>Failed to deploy VM with error "cannot find DeployPlannerSelector"</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1709</para>
              </entry>
              <entry>
                <para>AWS Regions - As part of adding a new region, project related entries should
                  not be synced from accounts table.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1710</para>
              </entry>
              <entry>
                <para>AWS Regions - As part of adding a new region,default_zone_id column for the
                  account entries should not be synced.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1711</para>
              </entry>
              <entry>
                <para>AWS Regions - Include all the details of the API call made in the Events
                  payload when changes in Admin/Account/User objects are made.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1713</para>
              </entry>
              <entry>
                <para>EC2 REST API: AWS API Installation Problem</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1714</para>
              </entry>
              <entry>
                <para>Doc section has wrong title: Setting Zone VLAN and Running VM Maximum</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1715</para>
              </entry>
              <entry>
                <para>"Missing ""host"" config setting in docs on management server load
                  balancing</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1716</para>
              </entry>
              <entry>
                <para>"AWS Regions - listRegions(),removeRegions(),updateRegions() should accept
                  UUID value instead of id.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1718</para>
              </entry>
              <entry>
                <para>AWS Regions - removeRegion() response returns updateregionresponse</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1719</para>
              </entry>
              <entry>
                <para>EC2 REST API: AWS APIs are not getting translated on the CloudStack Management
                  Server</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1720</para>
              </entry>
              <entry>
                <para>Have an upgrade path from 4.0.x to 4.1 and 4.0.x to 4.2.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1729</para>
              </entry>
              <entry>
                <para>Ensure adapter execution order in runtime</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1733</para>
              </entry>
              <entry>
                <para>[ACS41][UI] Add guest network is missing ip range fields and missing network
                  offering</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1736</para>
              </entry>
              <entry>
                <para>Ubuntu 12.04 cloud-setup-management Failed to configure CloudStack Management
                  Server</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1738</para>
              </entry>
              <entry>
                <para>StatsCollector is not running</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1740</para>
              </entry>
              <entry>
                <para>Failed to view console</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1746</para>
              </entry>
              <entry>
                <para>Cloudstack Usage Server won't start</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1747</para>
              </entry>
              <entry>
                <para>"mvn deploydb only creates 4.0 DB, not 4.1</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1750</para>
              </entry>
              <entry>
                <para>injectkeys script fails on OSX because cp does not have a -b option (backup of
                  destination file</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1761</para>
              </entry>
              <entry>
                <para>Available local storage disk capacity incorrectly reported in KVM to
                  manager</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1764</para>
              </entry>
              <entry>
                <para>ListTemplateCommand failed with java.lang.NumberFormatException and failed to
                  create default template.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1772</para>
              </entry>
              <entry>
                <para>the change in vnc listening port will cause live migration doesn't
                  work.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1773</para>
              </entry>
              <entry>
                <para>Disable baremetal functionality</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1776</para>
              </entry>
              <entry>
                <para>NPE on listSecondaryStorageHostsInAllZones in Upgraded setup from 4.0 to
                  4.1.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1785</para>
              </entry>
              <entry>
                <para>Redundant Router test cases failing during automation run.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1789</para>
              </entry>
              <entry>
                <para>Unable to download templates to Primary Storage if a host is in
                  maintenance.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1791</para>
              </entry>
              <entry>
                <para>Volumes with storage tags can't be attached.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1792</para>
              </entry>
              <entry>
                <para>"AWS Regions - RuntimeException while executing listAccounts(), when the
                  encryption keys are set to different values between regions.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1793</para>
              </entry>
              <entry>
                <para>L10n docs don't build in chinese, portuguese and japanese</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1795</para>
              </entry>
              <entry>
                <para>Customize AOP to fully support legacy CloudStack @DB and @ActionEvent
                  semantics.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1796</para>
              </entry>
              <entry>
                <para>Japanese docs don't build.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1802</para>
              </entry>
              <entry>
                <para>Upgrade 4.0 -> 4.1 - Not able to start management server becasue of missing
                  /etc/cloudstack/management/tomcat6.conf file</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1804</para>
              </entry>
              <entry>
                <para>Upgrade 4.0 -> 4.1 - DB upgrade fails</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1805</para>
              </entry>
              <entry>
                <para>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException seen after long time
                  of inactivity resulting in not being able to log in to the management
                  server</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1810</para>
              </entry>
              <entry>
                <para>listTemplate API with templatefilter=featured|community is not returning any
                  lists</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1811</para>
              </entry>
              <entry>
                <para>"Upgrade 4.0->4.1 - When upgrade scripts fail, component loading continues and
                  management server starts.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1812</para>
              </entry>
              <entry>
                <para>create physical network fails while creating basic zone</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1825</para>
              </entry>
              <entry>
                <para>EC2 REST API: AWS APIs fail to execute due to BeanCreationException: Error
                  creating bean with name 'SAclDaoImpl'</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1826</para>
              </entry>
              <entry>
                <para>"Storage migration not working, seemingly due to uuid vs id</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1827</para>
              </entry>
              <entry>
                <para>Redundant router - When VR Master was stopped failover to VR Backup did not
                  occur.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1834</para>
              </entry>
              <entry>
                <para>"Events are not generated for registerUserKeys(), Enabling account and Editing
                  account.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1836</para>
              </entry>
              <entry>
                <para>License header failures for ja-JP .po translation file</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1839</para>
              </entry>
              <entry>
                <para>Upgrade 4.0 -> 4.1 - Upgraded DB has lot more keys and indexes for many tables
                  compare to the fresh installed 4.1 DB</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1841</para>
              </entry>
              <entry>
                <para>ASF 4.0 to 4.1 Upgrade: Missing Few Global Configuration parameters on the
                  Upgraded Setup.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1842</para>
              </entry>
              <entry>
                <para>ASF 4.0 to 4.1 Upgrade: Missing Ubuntu 12.04 Guest OS Types on the Upgraded
                  Setup.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1844</para>
              </entry>
              <entry>
                <para>Upgrade 4.0 -> 4.1 - KVM host agent.properties is not restored as part of
                  upgrading the binaries from 4.0 to 4.1.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1845</para>
              </entry>
              <entry>
                <para>KVM - storage migration often fails</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1846</para>
              </entry>
              <entry>
                <para>"KVM - storage pools can silently fail to be unregistered, leading to failure
                  to register later.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1848</para>
              </entry>
              <entry>
                <para>Cloudstack Packages are not got updated with scenario 4.0 to 4.1 upgrade where
                  MS is on Ubuntu 12.04.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1856</para>
              </entry>
              <entry>
                <para>Upgrade 4.0 -> 4.1 - Fresh install of 4.1 has 3 parameters missing in
                  db.properties compared to an upgraded 4.0 setup</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1873</para>
              </entry>
              <entry>
                <para>"Installation : JasyptPBEStringDecryptionCLI missing, failed to decrypt db
                  password</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1874</para>
              </entry>
              <entry>
                <para>AWS Regions - Account table in cloud_usage DB has region_id</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1876</para>
              </entry>
              <entry>
                <para>External Devices - network offering for external devices is not returned in
                  API listNetworkOfferings when creating instances.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1877</para>
              </entry>
              <entry>
                <para>Failed to connect to DB while starting Ubuntu management server after
                  upgrading the packages from 4.0 to 4.1.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1882</para>
              </entry>
              <entry>
                <para>â€œHTTP Status 404 ã€‚ The requested resource () is not available.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1890</para>
              </entry>
              <entry>
                <para>listProjects is not listing state in the response</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1900</para>
              </entry>
              <entry>
                <para>"Upgrade 4.0 -> 4.1, We do not have a copy of db.properties that comes from a
                  4.1 installation saved anywhere.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1929</para>
              </entry>
              <entry>
                <para>ASF 4.1 cloudstack agent fail to install in KVM host CENTOS 6.3 OS:
                  qemu-kvm-0.12.1.2-3.295.el6.10.x86_64 requires libusbredirparser.so.0</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1934</para>
              </entry>
              <entry>
                <para>NPE with listSupportedNetworkServices after upgrade from 4.0 to 4.1 (Ubuntu
                  MS)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1935</para>
              </entry>
              <entry>
                <para>Cloud utilities are not renamed to Cloudstack after upgrade from 4.0 to 4.1
                  [Ubutnu MS]</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1936</para>
              </entry>
              <entry>
                <para>On CentOS, after a upgrade from 4.0.1 to 4.1 on a cloud node (cloud-agent),
                  the new cloustack-agent isn't add as a service (chkconfig)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1951</para>
              </entry>
              <entry>
                <para>centos packaging: cloud-install-sys-tmplt can't find jasypt jar.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1971</para>
              </entry>
              <entry>
                <para>VM deployed to incorrect primary storage.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1972</para>
              </entry>
              <entry>
                <para>VM deployed to incorrect primary storage.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1978</para>
              </entry>
              <entry>
                <para>openvswitch - unable to start console session for SSVM CPVM user VM</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1980</para>
              </entry>
              <entry>
                <para>"[4.1]cloudstack-setup-bridge, cloudstack-setup-encryption &amp;
                  cloudstack-sysvmadm utilities are not available in Ubuntu 12.04 Management
                  Server.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1987</para>
              </entry>
              <entry>
                <para>Deleted service offerings owned by a domain show up to domain user.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1988</para>
              </entry>
              <entry>
                <para>AWS API using SOAP client - User Registration fails</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-1989</para>
              </entry>
              <entry>
                <para>"Query service offering by ID returns no result, but querying all returns
                  service offering</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-2003</para>
              </entry>
              <entry>
                <para>Deleting domain while deleted account is cleaning up leaves VMs expunging
                  forever due to 'Failed to update resource count</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>CLOUDSTACK-2007</para>
              </entry>
              <entry>
                <para>Release Notes failing to build on jenkins.cs.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section id="known-issues-4.1">
      <title>Known Issues in 4.1.0</title>
      <informaltable>
        <tgroup cols="2" align="left" colsep="1" rowsep="1">
          <colspec colwidth="1*" colname="1" colnum="1"/>
          <colspec colwidth="2*" colname="2" colnum="2"/>
          <thead>
            <row>
              <entry>
                <para>Issue ID</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1747"
                    >CLOUDSTACK-1747</ulink></para></entry>
              <entry><para>mvn deploydb only creates 4.0 DB, not 4.1</para>
                <para>Due to tooling changes between 4.1 and 4.2, CloudStack's database is created
                  using the 4.0 schema and updated to the 4.1 schema when the management server
                  starts for the first time. It's OK to see the same schema if the management server
                  has not started yet.</para>
              </entry>
            </row>
            <row>
              <entry><para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1824"
                    >CLOUDSTACK-1824</ulink></para></entry>
              <entry><para>Service CloudStack-Management is being displayed as cloud-management
                  service </para>
                <para>Many scripts and text entries have references to cloud-management rather than
                  cloudstack-management due to the changeover between 4.0 and 4.1 to rename
                  services. This is a minor issue and should be corrected by 4.2.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1824"
                    >CLOUDSTACK-1824</ulink></para></entry>
              <entry><para>Service CloudStack-Management is being displayed as cloud-management
                  service</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1510"
                    >CLOUDSTACK-1510</ulink></para>
              </entry>
              <entry>
                <para>NPE when primary storage is added with wrong path</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1428"
                    >CLOUDSTACK-1428</ulink></para>
              </entry>
              <entry>
                <para>[UI] Instance which are created without display name are not visible when
                  added to LB</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1306"
                    >CLOUDSTACK-1306</ulink></para>
              </entry>
              <entry>
                <para>Better Error message when trying to deploy Vm by passing static Ipv4 addresses
                  that are assigned to another VM/IP4 address is outside the iprange.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-1236"
                    >CLOUDSTACK-1236</ulink></para>
              </entry>
              <entry>
                <para>Warning while adding Xen 6.1 host [Unable to create local link network]</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-969"
                    >CLOUDSTACK-969</ulink></para>
              </entry>
              <entry>
                <para>api: zone response lists vlan in it as &quot;vlan range of zone&quot; but the
                  vlan belongs to physical network</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-963"
                    >CLOUDSTACK-963</ulink></para>
              </entry>
              <entry>
                <para>[cloud.utils.AnnotationHelper] class java.lang.Stringdoes not have a Table
                  annotation</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-458"
                    >CLOUDSTACK-458</ulink></para>
              </entry>
              <entry>
                <para>xen:snapshots:Storage gc fail to clean the failed snapshot images from
                  secondarystorage</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-315"
                    >CLOUDSTACK-315</ulink></para>
              </entry>
              <entry>
                <para>Infrastructure view does not show capacity values</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-300"
                    >CLOUDSTACK-300</ulink></para>
              </entry>
              <entry>
                <para>Creation of compute offering allow combination of local storage + HA</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-282"
                    >CLOUDSTACK-282</ulink></para>
              </entry>
              <entry>
                <para>Virtual Routers do not properly resolve DNS SRV Records</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-276"
                    >CLOUDSTACK-276</ulink></para>
              </entry>
              <entry>
                <para>SSVM ID is exposed in the Error Message thrown by AddTrafficType API</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-270"
                    >CLOUDSTACK-270</ulink></para>
              </entry>
              <entry>
                <para>Ui should not ask for a vlan range if the physical network isolation type is
                  not VLAN</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-245"
                    >CLOUDSTACK-245</ulink></para>
              </entry>
              <entry>
                <para>VPC ACLs are not stored and programmed consistently</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-231"
                    >CLOUDSTACK-231</ulink></para>
              </entry>
              <entry>
                <para>Tag creation using special charecters</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-124"
                    >CLOUDSTACK-124</ulink></para>
              </entry>
              <entry>
                <para>NetworkGarbageCollector not cleaning up networks</para>
              </entry>
            </row>
            <row>
              <entry>
                <para><ulink url="https://issues.apache.org/jira/browse/CLOUDSTACK-62"
                    >CLOUDSTACK-62</ulink></para>
              </entry>
              <entry>
                <para>console proxy does not support any keymaps besides us, jp</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
  </chapter>
  <chapter id="upgrade-instructions">
    <title>Upgrade Instructions</title>
    <para>This section contains upgrade instructions from prior versions of CloudStack to Apache
      CloudStack 4.1.0. We include instructions on upgrading to Apache CloudStack from pre-Apache
      versions of Citrix CloudStack (last version prior to Apache is 3.0.2) and from the releases
      made while CloudStack was in the Apache Incubator.</para>
    <para>If you run into any issues during upgrades, please feel free to ask questions on
      users@apache.cloudstack.org or dev@apache.cloudstack.org.</para>
    <section id="upgrade-from-4.0-to-4.1">
      <title>Upgrade from 4.0.x to 4.1.0</title>
      <para>This section will guide you from &PRODUCT; 4.0.x versions to &PRODUCT; 4.1.0.</para>
      <para>Any steps that are hypervisor-specific will be called out with a note.</para>
      <warning>
        <title>Package Structure Changes</title>
        <para>The package structure for &PRODUCT; has changed significantly since the 4.0.x
          releases. If you've compiled your own packages, you'll notice that the package names and
          the number of packages has changed. This is <emphasis>not</emphasis> a bug.</para>
        <para>However, this <emphasis>does</emphasis> mean that the procedure is not as simple as an
            <command>apt-get upgrade</command> or <command>yum update</command>, so please follow
          this section carefully.</para>
      </warning>
      <para>We recommend reading through this section once or twice before beginning your upgrade
        procedure, and working through it on a test system before working on a production
        system.</para>
      <orderedlist>
        <listitem>
          <para>Most users of &PRODUCT; manage the installation and upgrades of &PRODUCT; with one
            of Linux's predominant package systems, RPM or APT. This guide assumes you'll be using
            RPM and Yum (for Red Hat Enterprise Linux or CentOS), or APT and Debian packages (for
            Ubuntu).</para>
          <para>Create RPM or Debian packages (as appropriate) and a repository from the 4.1.0
            source, or check the Apache CloudStack downloads page at <ulink
              url="http://cloudstack.apache.org/downloads.html"
              >http://cloudstack.apache.org/downloads.html</ulink> for package repositories supplied
            by community members. You will need them for step <xref linkend="upgrade-deb-packages"/>
            or step <xref linkend="upgrade-rpm-packages"/>.</para>
          <para>Instructions for creating packages from the &PRODUCT; source are in the <ulink
              url="http://cloudstack.apache.org/docs/en-US/index.html">Installation
            Guide</ulink>.</para>
        </listitem>
        <listitem>
          <para>Stop your management server or servers. Run this on all management server
            hosts:</para>
          <programlisting><prompt>#</prompt> service cloud-management stop</programlisting>
        </listitem>
        <listitem>
          <para>If you are running a usage server or usage servers, stop those as well:</para>
          <programlisting><prompt>#</prompt> service cloud-usage stop</programlisting>
        </listitem>
        <listitem>
          <para>Make a backup of your MySQL database. If you run into any issues or need to roll
            back the upgrade, this will assist in debugging or restoring your existing environment.
            You'll be prompted for your password.</para>
          <programlisting><prompt>#</prompt> mysqldump -u root -p cloud &gt; cloudstack-backup.sql</programlisting>
        </listitem>
        <listitem>
          <para>Whether you're upgrading a Red Hat/CentOS based system or Ubuntu based system,
            you're going to need to stop the CloudStack management server before proceeding.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-management stop</programlisting>
        </listitem>
        <listitem>
          <para>If you have made changes to
              <filename>/etc/cloud/management/components.xml</filename>, you'll need to carry these
            over manually to the new file,
              <filename>/etc/cloudstack/management/componentContext.xml</filename>. This is not done
            automatically. (If you're unsure, we recommend making a backup of the original
              <filename>components.xml</filename> to be on the safe side.</para>
        </listitem>
        <listitem id="upgrade-deb-packages">
          <para>If you are using Ubuntu, follow this procedure to upgrade your packages. If not,
            skip to step <xref linkend="upgrade-rpm-packages"/>.</para>
          <note>
            <title>Community Packages</title>
            <para>This section assumes you're using the community supplied packages for &PRODUCT;.
              If you've created your own packages and APT repository, substitute your own URL for
              the ones used in these examples.</para>
          </note>
          <orderedlist id="debsteps">
            <listitem>
              <para>The first order of business will be to change the sources list for each system
                with &PRODUCT; packages. This means all management servers, and any hosts that have
                the KVM agent. (No changes should be necessary for hosts that are running VMware or
                Xen.)</para>
              <para>Start by opening <filename>/etc/apt/sources.list.d/cloudstack.list</filename> on
                any systems that have &PRODUCT; packages installed.</para>
              <para>This file should have one line, which contains:</para>
              <programlisting language="Bash">deb http://cloudstack.apt-get.eu/ubuntu precise 4.0</programlisting>
              <para>We'll change it to point to the new package repository:</para>
              <programlisting language="Bash">deb http://cloudstack.apt-get.eu/ubuntu precise 4.1</programlisting>
              <para>If you're using your own package repository, change this line to read as
                appropriate for your 4.1.0 repository.</para>
            </listitem>
            <listitem>
              <para>Now update your apt package list:</para>
              <programlisting language="Bash">$ sudo apt-get update</programlisting>
            </listitem>
            <listitem id="deb-master">
              <para>Now that you have the repository configured, it's time to install the
                  <filename>cloudstack-management</filename> package. This will pull in any other
                dependencies you need.</para>
              <programlisting language="Bash">$ sudo apt-get install cloudstack-management</programlisting>
            </listitem>
            <listitem id="kvm-agent-deb">
              <para>You will need to manually install the <filename>cloudstack-agent</filename>
                package:</para>
              <programlisting language="Bash">$ sudo apt-get install cloudstack-agent</programlisting>
              <para>During the installation of <filename>cloudstack-agent</filename>, APT will copy
                your <filename>agent.properties</filename>, <filename>log4j-cloud.xml</filename>,
                and <filename>environment.properties</filename> from
                  <filename>/etc/cloud/agent</filename> to
                  <filename>/etc/cloudstack/agent</filename>.</para>
              <para>When prompted whether you wish to keep your configuration, say Yes.</para>
            </listitem>
            <listitem>
              <para>Verify that the file
                  <filename>/etc/cloudstack/agent/environment.properties</filename> has a line that
                reads:</para>
              <programlisting language="Bash">paths.script=/usr/share/cloudstack-common</programlisting>
              <para>If not, add the line.</para>
            </listitem>
            <listitem>
              <para>Restart the agent:</para>
              <programlisting language="Bash">
service cloud-agent stop
killall jsvc
service cloudstack-agent start
                            </programlisting>
            </listitem>
            <listitem>
              <para>During the upgrade, <filename>log4j-cloud.xml</filename> was simply copied over,
                so the logs will continue to be added to
                  <filename>/var/log/cloud/agent/agent.log</filename>. There's nothing
                  <emphasis>wrong</emphasis> with this, but if you prefer to be consistent, you can
                change this by copying over the sample configuration file:</para>
              <programlisting language="Bash">
cd /etc/cloudstack/agent
mv log4j-cloud.xml.dpkg-dist log4j-cloud.xml
service cloudstack-agent restart
                            </programlisting>
            </listitem>
            <listitem>
              <para>Once the agent is running, you can uninstall the old cloud-* packages from your
                system:</para>
              <programlisting language="Bash">sudo dpkg --purge cloud-agent</programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="upgrade-rpm-packages">
          <para>If you are using CentOS or RHEL, follow this procedure to upgrade your packages. If
            not, skip to step <xref linkend="restart-system-vms"/>.</para>
          <note>
            <title>Community Packages</title>
            <para>This section assumes you're using the community supplied packages for &PRODUCT;.
              If you've created your own packages and yum repository, substitute your own URL for
              the ones used in these examples.</para>
          </note>
          <orderedlist id="rpmsteps">
            <listitem>
              <para>The first order of business will be to change the yum repository for each system
                with &PRODUCT; packages. This means all management servers, and any hosts that have
                the KVM agent. (No changes should be necessary for hosts that are running VMware or
                Xen.)</para>
              <para>Start by opening <filename>/etc/yum.repos.d/cloudstack.repo</filename> on any
                systems that have &PRODUCT; packages installed.</para>
              <para>This file should have content similar to the following:</para>
              <programlisting language="Bash">
[apache-cloudstack]
name=Apache CloudStack
baseurl=http://cloudstack.apt-get.eu/rhel/4.0/
enabled=1
gpgcheck=0
                            </programlisting>
              <para>If you are using the community provided package repository, change the baseurl
                to http://cloudstack.apt-get.eu/rhel/4.1/</para>
              <para>If you're using your own package repository, change this line to read as
                appropriate for your 4.1.0 repository.</para>
            </listitem>
            <listitem id="rpm-master">
              <para>Now that you have the repository configured, it's time to install the
                  <filename>cloudstack-management</filename> package by upgrading the older
                  <filename>cloud-client</filename> package.</para>
              <programlisting language="Bash">$ sudo yum upgrade cloud-client</programlisting>
            </listitem>
            <listitem id="kvm-agent-rpm">
              <para>For KVM hosts, you will need to upgrade the <filename>cloud-agent</filename>
                package, similarly installing the new version as
                  <filename>cloudstack-agent</filename>.</para>
              <programlisting language="Bash">$ sudo yum upgrade cloud-agent</programlisting>
              <para>During the installation of <filename>cloudstack-agent</filename>, the RPM will
                copy your <filename>agent.properties</filename>,
                  <filename>log4j-cloud.xml</filename>, and
                  <filename>environment.properties</filename> from
                  <filename>/etc/cloud/agent</filename> to
                  <filename>/etc/cloudstack/agent</filename>.</para>
            </listitem>
            <listitem>
              <para>Verify that the file
                  <filename>/etc/cloudstack/agent/environment.properties</filename> has a line that
                reads:</para>
              <programlisting language="Bash">paths.script=/usr/share/cloudstack-common</programlisting>
              <para>If not, add the line.</para>
            </listitem>
            <listitem>
              <para>Restart the agent:</para>
              <programlisting language="Bash">
service cloud-agent stop
killall jsvc
service cloudstack-agent start
                            </programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="restart-system-vms">
          <para>Once you've upgraded the packages on your management servers, you'll need to restart
            the system VMs. Make sure port 8096 is open in your local host firewall to do
            this.</para>
          <para>There is a script that will do this for you, all you need to do is run the script
            and supply the IP address for your MySQL instance and your MySQL credentials:</para>
          <programlisting language="Bash"><prompt>#</prompt> nohup cloudstack-sysvmadm -d <replaceable>IP address</replaceable> -u cloud -p -a &gt; sysvm.log 2&gt;&amp;1 &amp;</programlisting>
          <para>You can monitor the log for progress. The process of restarting the system VMs can
            take an hour or more.</para>
          <programlisting language="Bash"><prompt>#</prompt> tail -f sysvm.log</programlisting>
          <para>The output to <filename>sysvm.log</filename> will look something like this:</para>
          <programlisting language="Bash">
Stopping and starting 1 secondary storage vm(s)...
Done stopping and starting secondary storage vm(s)
Stopping and starting 1 console proxy vm(s)...
Done stopping and starting console proxy vm(s).
Stopping and starting 4 running routing vm(s)...
Done restarting router(s).
                    </programlisting>
        </listitem>
        <listitem>
          <note>
            <title>For Xen Hosts: Copy vhd-utils</title>
            <para>This step is only for CloudStack installs that are using Xen hosts.</para>
          </note>
          <para>Copy the file <filename>vhd-utils</filename> to
              <filename>/usr/share/cloudstack-common/scripts/vm/hypervisor/xenserver</filename>.</para>
        </listitem>
      </orderedlist>
    </section>
    <section id="upgrade-from-3.0.2-to-4.0">
      <title>Upgrade from 3.0.2 to 4.1.0</title>
      <para>This section will guide you from Citrix CloudStack 3.0.2 to Apache CloudStack 4.1.0.
        Sections that are hypervisor-specific will be called out with a note.</para>
      <orderedlist>
        <listitem>
          <note>
            <para>The following upgrade instructions apply only if you're using VMware hosts. If
              you're not using VMware hosts, skip this step and move on to <xref
                linkend="stopping-usage-servers"/>.</para>
          </note>
          <para>In each zone that includes VMware hosts, you need to add a new system VM template. </para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>While running the existing 3.0.2 system, log in to the UI as root
                administrator.</para>
            </listitem>
            <listitem>
              <para>In the left navigation bar, click Templates.</para>
            </listitem>
            <listitem>
              <para>In Select view, click Templates.</para>
            </listitem>
            <listitem>
              <para>Click Register template.</para>
              <para>The Register template dialog box is displayed.</para>
            </listitem>
            <listitem>
              <para>In the Register template dialog box, specify the following values (do not change
                these):</para>
              <informaltable>
                <tgroup cols="2" align="left" colsep="1" rowsep="1">
                  <colspec colwidth="1*" colname="1" colnum="1"/>
                  <colspec colwidth="2*" colname="2" colnum="2"/>
                  <thead>
                    <row>
                      <entry><para>Field</para></entry>
                      <entry><para>Value</para></entry>
                    </row>
                  </thead>
                  <tbody>
                    <row>
                      <entry><para>Name</para></entry>
                      <entry><para>systemvm-vmware-4.1</para></entry>
                    </row>
                    <row>
                      <entry><para>Description</para></entry>
                      <entry><para>systemvm-vmware-4.1</para></entry>
                    </row>
                    <row>
                      <entry><para>URL</para></entry>
                      <entry><para>http://download.cloud.com/templates/burbank/burbank-systemvm-08012012.ova</para></entry>
                    </row>
                    <row>
                      <entry><para>Zone</para></entry>
                      <entry><para>Choose the zone where this hypervisor is used</para></entry>
                    </row>
                    <row>
                      <entry><para>Hypervisor</para></entry>
                      <entry><para>VMware</para></entry>
                    </row>
                    <row>
                      <entry><para>Format</para></entry>
                      <entry><para>OVA</para></entry>
                    </row>
                    <row>
                      <entry><para>OS Type</para></entry>
                      <entry><para>Debian GNU/Linux 5.0 (32-bit)</para></entry>
                    </row>
                    <row>
                      <entry><para>Extractable</para></entry>
                      <entry><para>no</para></entry>
                    </row>
                    <row>
                      <entry><para>Password Enabled</para></entry>
                      <entry><para>no</para></entry>
                    </row>
                    <row>
                      <entry><para>Public</para></entry>
                      <entry><para>no</para></entry>
                    </row>
                    <row>
                      <entry><para>Featured</para></entry>
                      <entry><para>no</para></entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>
            </listitem>
            <listitem>
              <para>Watch the screen to be sure that the template downloads successfully and enters
                the READY state. Do not proceed until this is successful.</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="stopping-usage-servers">
          <para>Stop all Usage Servers if running. Run this on all Usage Server hosts.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-usage stop</programlisting>
        </listitem>
        <listitem>
          <para>Stop the Management Servers. Run this on all Management Server hosts.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-management stop</programlisting>
        </listitem>
        <listitem>
          <para>On the MySQL master, take a backup of the MySQL databases. We recommend performing
            this step even in test upgrades. If there is an issue, this will assist with
            debugging.</para>
          <para>In the following commands, it is assumed that you have set the root password on the
            database, which is a CloudStack recommended best practice. Substitute your own MySQL
            root password.</para>
          <programlisting><prompt>#</prompt> <command>mysqldump</command> -u root -p<replaceable>mysql_password</replaceable> cloud > <filename>cloud-backup.dmp</filename>
                        <prompt>#</prompt> <command>mysqldump</command> -u root -p<replaceable>mysql_password</replaceable> cloud_usage > <filename>cloud-usage-backup.dmp</filename></programlisting>
        </listitem>
        <listitem>
          <para>Either build RPM/DEB packages as detailed in the Installation Guide, or use one of
            the community provided yum/apt repositories to gain access to the &PRODUCT;
            binaries.</para>
        </listitem>
        <listitem id="upgrade-deb-packages-302">
          <para>If you are using Ubuntu, follow this procedure to upgrade your packages. If not,
            skip to step <xref linkend="upgrade-rpm-packages-302"/>.</para>
          <note>
            <title>Community Packages</title>
            <para>This section assumes you're using the community supplied packages for &PRODUCT;.
              If you've created your own packages and APT repository, substitute your own URL for
              the ones used in these examples.</para>
          </note>
          <orderedlist id="debsteps-302">
            <listitem>
              <para>The first order of business will be to change the sources list for each system
                with &PRODUCT; packages. This means all management servers, and any hosts that have
                the KVM agent. (No changes should be necessary for hosts that are running VMware or
                Xen.)</para>
              <para>Start by opening <filename>/etc/apt/sources.list.d/cloudstack.list</filename> on
                any systems that have &PRODUCT; packages installed.</para>
              <para>This file should have one line, which contains:</para>
              <programlisting language="Bash">deb http://cloudstack.apt-get.eu/ubuntu precise 4.0</programlisting>
              <para>We'll change it to point to the new package repository:</para>
              <programlisting language="Bash">deb http://cloudstack.apt-get.eu/ubuntu precise 4.1</programlisting>
              <para>If you're using your own package repository, change this line to read as
                appropriate for your 4.1.0 repository.</para>
            </listitem>
            <listitem>
              <para>Now update your apt package list:</para>
              <programlisting language="Bash">$ sudo apt-get update</programlisting>
            </listitem>
            <listitem id="deb-master-302">
              <para>Now that you have the repository configured, it's time to install the
                  <filename>cloudstack-management</filename> package. This will pull in any other
                dependencies you need.</para>
              <programlisting language="Bash">$ sudo apt-get install cloudstack-management</programlisting>
            </listitem>
            <listitem id="kvm-agent-deb-302">
              <para>You will need to manually install the <filename>cloudstack-agent</filename>
                package:</para>
              <programlisting language="Bash">$ sudo apt-get install cloudstack-agent</programlisting>
              <para>During the installation of <filename>cloudstack-agent</filename>, APT will copy
                your <filename>agent.properties</filename>, <filename>log4j-cloud.xml</filename>,
                and <filename>environment.properties</filename> from
                  <filename>/etc/cloud/agent</filename> to
                  <filename>/etc/cloudstack/agent</filename>.</para>
              <para>When prompted whether you wish to keep your configuration, say Yes.</para>
            </listitem>
            <listitem>
              <para>Verify that the file
                  <filename>/etc/cloudstack/agent/environment.properties</filename> has a line that
                reads:</para>
              <programlisting language="Bash">paths.script=/usr/share/cloudstack-common</programlisting>
              <para>If not, add the line.</para>
            </listitem>
            <listitem>
              <para>Restart the agent:</para>
              <programlisting language="Bash">
service cloud-agent stop
killall jsvc
service cloudstack-agent start
                            </programlisting>
            </listitem>
            <listitem>
              <para>During the upgrade, <filename>log4j-cloud.xml</filename> was simply copied over,
                so the logs will continue to be added to
                  <filename>/var/log/cloud/agent/agent.log</filename>. There's nothing
                  <emphasis>wrong</emphasis> with this, but if you prefer to be consistent, you can
                change this by copying over the sample configuration file:</para>
              <programlisting language="Bash">
cd /etc/cloudstack/agent
mv log4j-cloud.xml.dpkg-dist log4j-cloud.xml
service cloudstack-agent restart
                            </programlisting>
            </listitem>
            <listitem>
              <para>Once the agent is running, you can uninstall the old cloud-* packages from your
                system:</para>
              <programlisting language="Bash">sudo dpkg --purge cloud-agent</programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="upgrade-rpm-packages-302">
          <para>If you are using CentOS or RHEL, follow this procedure to upgrade your packages. If
            not, skip to step <xref linkend="correct-components-xml-302"/>.</para>
          <note>
            <title>Community Packages</title>
            <para>This section assumes you're using the community supplied packages for &PRODUCT;.
              If you've created your own packages and yum repository, substitute your own URL for
              the ones used in these examples.</para>
          </note>
          <orderedlist id="rpmsteps-302">
            <listitem>
              <para>The first order of business will be to change the yum repository for each system
                with &PRODUCT; packages. This means all management servers, and any hosts that have
                the KVM agent. (No changes should be necessary for hosts that are running VMware or
                Xen.)</para>
              <para>Start by opening <filename>/etc/yum.repos.d/cloudstack.repo</filename> on any
                systems that have &PRODUCT; packages installed.</para>
              <para>This file should have content similar to the following:</para>
              <programlisting language="Bash">
[apache-cloudstack]
name=Apache CloudStack
baseurl=http://cloudstack.apt-get.eu/rhel/4.0/
enabled=1
gpgcheck=0
                            </programlisting>
              <para>If you are using the community provided package repository, change the baseurl
                to http://cloudstack.apt-get.eu/rhel/4.1/</para>
              <para>If you're using your own package repository, change this line to read as
                appropriate for your 4.1.0 repository.</para>
            </listitem>
            <listitem id="rpm-master-302">
              <para>Now that you have the repository configured, it's time to install the
                  <filename>cloudstack-management</filename> package by upgrading the older
                  <filename>cloud-client</filename> package.</para>
              <programlisting language="Bash">$ sudo yum upgrade cloud-client</programlisting>
            </listitem>
            <listitem id="kvm-agent-rpm-302">
              <para>For KVM hosts, you will need to upgrade the <filename>cloud-agent</filename>
                package, similarly installing the new version as
                  <filename>cloudstack-agent</filename>.</para>
              <programlisting language="Bash">$ sudo yum upgrade cloud-agent</programlisting>
              <para>During the installation of <filename>cloudstack-agent</filename>, the RPM will
                copy your <filename>agent.properties</filename>,
                  <filename>log4j-cloud.xml</filename>, and
                  <filename>environment.properties</filename> from
                  <filename>/etc/cloud/agent</filename> to
                  <filename>/etc/cloudstack/agent</filename>.</para>
            </listitem>
            <listitem>
              <para>Verify that the file
                  <filename>/etc/cloudstack/agent/environment.properties</filename> has a line that
                reads:</para>
              <programlisting language="Bash">paths.script=/usr/share/cloudstack-common</programlisting>
              <para>If not, add the line.</para>
            </listitem>
            <listitem>
              <para>Restart the agent:</para>
              <programlisting language="Bash">
service cloud-agent stop
killall jsvc
service cloudstack-agent start
                            </programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="correct-components-xml-302">
          <para>If you have made changes to your copy of
              <filename>/etc/cloud/management/components.xml</filename> the changes will be
            preserved in the upgrade. However, you need to do the following steps to place these
            changes in a new version of the file which is compatible with version 4.1.0.</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Make a backup copy of <filename>/etc/cloud/management/components.xml</filename>.
                For example:</para>
              <programlisting># mv /etc/cloud/management/components.xml /etc/cloud/management/components.xml-backup</programlisting>
            </listitem>
            <listitem>
              <para>Copy <filename>/etc/cloud/management/components.xml.rpmnew</filename> to create
                a new <filename>/etc/cloud/management/components.xml</filename>:</para>
              <programlisting># cp -ap /etc/cloud/management/components.xml.rpmnew /etc/cloud/management/components.xml</programlisting>
            </listitem>
            <listitem>
              <para>Merge your changes from the backup file into the new
                  <filename>components.xml</filename>.</para>
              <programlisting># vi /etc/cloud/management/components.xml</programlisting>
            </listitem>
          </orderedlist>
          <note>
            <para>If you have more than one management server node, repeat the upgrade steps on each
              node.</para>
          </note>
        </listitem>
        <listitem>
          <para>Start the first Management Server. Do not start any other Management Server nodes
            yet.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-management start</programlisting>
          <para>Wait until the databases are upgraded. Ensure that the database upgrade is complete.
            After confirmation, start the other Management Servers one at a time by running the same
            command on each node.</para>
          <note>
            <para>Failing to restart the Management Server indicates a problem in the upgrade.
              Having the Management Server restarted without any issues indicates that the upgrade
              is successfully completed.</para>
          </note>
        </listitem>
        <listitem>
          <para>Start all Usage Servers (if they were running on your previous version). Perform
            this on each Usage Server host.</para>
          <para><command># service cloud-usage start</command></para>
        </listitem>
        <listitem>
          <note>
            <para>Additional steps are required for each KVM host. These steps will not affect
              running guests in the cloud. These steps are required only for clouds using KVM as
              hosts and only on the KVM hosts.</para>
          </note>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Configure a yum or apt respository containing the &PRODUCT; packages as outlined
                in the Installation Guide.</para>
            </listitem>
            <listitem>
              <para>Stop the running agent.</para>
              <para><command># service cloud-agent stop</command></para>
            </listitem>
            <listitem>
              <para>Update the agent software with one of the following command sets as appropriate
                for your environment.</para>
              <para><command># yum update cloud-*</command></para>
              <para><command># apt-get update</command></para>
              <para><command># apt-get upgrade cloud-*</command></para>
            </listitem>
            <listitem>
              <para>Start the agent.</para>
              <programlisting># service cloud-agent start</programlisting>
            </listitem>
            <listitem>
              <para>Edit <filename>/etc/cloud/agent/agent.properties</filename> to change the
                resource parameter from
                "com.cloud.agent.resource.computing.LibvirtComputingResource" to
                "com.cloud.hypervisor.kvm.resource.LibvirtComputingResource".</para>
            </listitem>
            <listitem>
              <para>Start the cloud agent and cloud management services.</para>
            </listitem>
            <listitem>
              <para>When the Management Server is up and running, log in to the CloudStack UI and
                restart the virtual router for proper functioning of all the features.</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>Log in to the CloudStack UI as administrator, and check the status of the hosts. All
            hosts should come to Up state (except those that you know to be offline). You may need
            to wait 20 or 30 minutes, depending on the number of hosts.</para>
          <note>
            <para>Troubleshooting: If login fails, clear your browser cache and reload the
              page.</para>
          </note>
          <para/>
          <para>Do not proceed to the next step until the hosts show in Up state.</para>
        </listitem>
        <listitem>
          <para>If you are upgrading from 3.0.2, perform the following:</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Ensure that the admin port is set to 8096 by using the "integration.api.port"
                global parameter.</para>
              <para>This port is used by the cloud-sysvmadm script at the end of the upgrade
                procedure. For information about how to set this parameter, see "Setting Global
                Configuration Parameters" in the Installation Guide.</para>
            </listitem>
            <listitem>
              <para>Restart the Management Server.</para>
              <note>
                <para>If you don't want the admin port to remain open, you can set it to null after
                  the upgrade is done and restart the management server.</para>
              </note>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>Run the <command>cloud-sysvmadm</command> script to stop, then start, all Secondary
            Storage VMs, Console Proxy VMs, and virtual routers. Run the script once on each
            management server. Substitute your own IP address of the MySQL instance, the MySQL user
            to connect as, and the password to use for that user. In addition to those parameters,
            provide the <command>-c</command> and <command>-r</command> arguments. For
            example:</para>
          <para><command># nohup cloud-sysvmadm -d 192.168.1.5 -u cloud -p password -c -r >
              sysvm.log 2>&amp;1 &amp;</command></para>
          <para><command># tail -f sysvm.log</command></para>
          <para>This might take up to an hour or more to run, depending on the number of accounts in
            the system.</para>
        </listitem>
        <listitem>
          <para>If needed, upgrade all Citrix XenServer hypervisor hosts in your cloud to a version
            supported by CloudStack 4.1.0. The supported versions are XenServer 5.6 SP2 and 6.0.2.
            Instructions for upgrade can be found in the CloudStack 4.1.0 Installation Guide under
            "Upgrading XenServer Versions."</para>
        </listitem>
        <listitem>
          <para>Now apply the XenServer hotfix XS602E003 (and any other needed hotfixes) to
            XenServer v6.0.2 hypervisor hosts.</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Disconnect the XenServer cluster from CloudStack.</para>
              <para>In the left navigation bar of the CloudStack UI, select Infrastructure. Under
                Clusters, click View All. Select the XenServer cluster and click Actions -
                Unmanage.</para>
              <para>This may fail if there are hosts not in one of the states Up, Down,
                Disconnected, or Alert. You may need to fix that before unmanaging this
                cluster.</para>
              <para>Wait until the status of the cluster has reached Unmanaged. Use the CloudStack
                UI to check on the status. When the cluster is in the unmanaged state, there is no
                connection to the hosts in the cluster.</para>
            </listitem>
            <listitem>
              <para>To clean up the VLAN, log in to one XenServer host and run:</para>
              <para><command>/opt/xensource/bin/cloud-clean-vlan.sh</command></para>
            </listitem>
            <listitem>
              <para>Now prepare the upgrade by running the following on one XenServer host:</para>
              <para><command>/opt/xensource/bin/cloud-prepare-upgrade.sh</command></para>
              <para>If you see a message like "can't eject CD", log in to the VM and unmount the CD,
                then run this script again.</para>
            </listitem>
            <listitem>
              <para>Upload the hotfix to the XenServer hosts. Always start with the Xen pool master,
                then the slaves. Using your favorite file copy utility (e.g. WinSCP), copy the
                hotfixes to the host. Place them in a temporary folder such as /tmp. </para>
              <para>On the Xen pool master, upload the hotfix with this command:</para>
              <para><command>xe patch-upload file-name=XS602E003.xsupdate</command></para>
              <para>Make a note of the output from this command, which is a UUID for the hotfix
                file. You'll need it in another step later.</para>
              <note>
                <para>(Optional) If you are applying other hotfixes as well, you can repeat the
                  commands in this section with the appropriate hotfix number. For example,
                  XS602E004.xsupdate.</para>
              </note>
            </listitem>
            <listitem>
              <para>Manually live migrate all VMs on this host to another host. First, get a list of
                the VMs on this host:</para>
              <para><command># xe vm-list</command></para>
              <para>Then use this command to migrate each VM. Replace the example host name and VM
                name with your own:</para>
              <para><command># xe vm-migrate live=true host=<replaceable>host-name</replaceable>
                    vm=<replaceable>VM-name</replaceable></command></para>
              <note>
                <title>Troubleshooting</title>
                <para>If you see a message like "You attempted an operation on a VM which requires
                  PV drivers to be installed but the drivers were not detected," run:</para>
                <para><command>/opt/xensource/bin/make_migratable.sh
                    b6cf79c8-02ee-050b-922f-49583d9f1a14</command>.</para>
              </note>
            </listitem>
            <listitem>
              <para>Apply the hotfix. First, get the UUID of this host:</para>
              <programlisting># xe host-list</programlisting>
              <para>Then use the following command to apply the hotfix. Replace the example host
                UUID with the current host ID, and replace the hotfix UUID with the output from the
                patch-upload command you ran on this machine earlier. You can also get the hotfix
                UUID by running xe patch-list. </para>
              <programlisting><command>xe</command> patch-apply host-uuid=<replaceable>host-uuid</replaceable> uuid=<replaceable>hotfix-uuid</replaceable></programlisting>
            </listitem>
            <listitem>
              <para>Copy the following files from the CloudStack Management Server to the
                host.</para>
              <informaltable>
                <tgroup cols="2" align="left" colsep="1" rowsep="1">
                  <colspec colwidth="1*" colname="1" colnum="1"/>
                  <colspec colwidth="2*" colname="2" colnum="2"/>
                  <thead>
                    <row>
                      <entry><para>Copy from here...</para></entry>
                      <entry><para>...to here</para></entry>
                    </row>
                  </thead>
                  <tbody>
                    <row>
                      <entry><para>/usr/lib64/cloud/common/scripts/vm/hypervisor/xenserver/xenserver60/NFSSR.py</para></entry>
                      <entry><para>/opt/xensource/sm/NFSSR.py</para></entry>
                    </row>
                    <row>
                      <entry><para>/usr/lib64/cloud/common/scripts/vm/hypervisor/xenserver/setupxenserver.sh</para></entry>
                      <entry><para>/opt/xensource/bin/setupxenserver.sh</para></entry>
                    </row>
                    <row>
                      <entry><para>/usr/lib64/cloud/common/scripts/vm/hypervisor/xenserver/make_migratable.sh</para></entry>
                      <entry><para>/opt/xensource/bin/make_migratable.sh</para></entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>
            </listitem>
            <listitem>
              <para>(Only for hotfixes XS602E005 and XS602E007) You need to apply a new Cloud
                Support Pack.</para>
              <itemizedlist>
                <listitem>
                  <para>Download the CSP software onto the XenServer host from one of the following
                    links:</para>
                  <para>For hotfix XS602E005: <ulink
                      url="http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E005/56710/xe-phase-2/xenserver-cloud-supp.tgz"
                      >http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E005/56710/xe-phase-2/xenserver-cloud-supp.tgz</ulink></para>
                  <para>For hotfix XS602E007: <ulink
                      url="http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E007/57824/xe-phase-2/xenserver-cloud-supp.tgz"
                      >http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E007/57824/xe-phase-2/xenserver-cloud-supp.tgz</ulink></para>
                </listitem>
                <listitem>
                  <para>Extract the file:</para>
                  <programlisting># tar xf xenserver-cloud-supp.tgz</programlisting>
                </listitem>
                <listitem>
                  <para>Run the following script:</para>
                  <programlisting># xe-install-supplemental-pack xenserver-cloud-supp.iso</programlisting>
                </listitem>
                <listitem>
                  <para>If the XenServer host is part of a zone that uses basic networking, disable
                    Open vSwitch (OVS):</para>
                  <programlisting># xe-switch-network-backend  bridge</programlisting>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para>Reboot this XenServer host.</para>
            </listitem>
            <listitem>
              <para>Run the following:</para>
              <programlisting>/opt/xensource/bin/setupxenserver.sh</programlisting>
              <note>
                <para>If the message "mv: cannot stat `/etc/cron.daily/logrotate': No such file or
                  directory" appears, you can safely ignore it.</para>
              </note>
            </listitem>
            <listitem>
              <para>Run the following:</para>
              <programlisting>for pbd in `xe pbd-list currently-attached=false| grep ^uuid | awk '{print $NF}'`; do xe pbd-plug uuid=$pbd ; </programlisting>
            </listitem>
            <listitem>
              <para>On each slave host in the Xen pool, repeat these steps, starting from "manually
                live migrate VMs."</para>
            </listitem>
          </orderedlist>
        </listitem>
      </orderedlist>
      <note>
        <title>Troubleshooting Tip</title>
        <para>If passwords which you know to be valid appear not to work after upgrade, or other UI
          issues are seen, try clearing your browser cache and reloading the UI page.</para>
      </note>
    </section>
    <section id="upgrade-from-2.2.x-to-4.1">
      <title>Upgrade from 2.2.14 to 4.1.0</title>
      <orderedlist>
        <listitem>
          <para>Ensure that you query your IPaddress usage records and process them; for example,
            issue invoices for any usage that you have not yet billed users for.</para>
          <para>Starting in 3.0.2, the usage record format for IP addresses is the same as the rest
            of the usage types. Instead of a single record with the assignment and release dates,
            separate records are generated per aggregation period with start and end dates. After
            upgrading to 4.1.0, any existing IP address usage records in the old format will no
            longer be available.</para>
        </listitem>
        <listitem>
          <para>If you are using version 2.2.0 - 2.2.13, first upgrade to 2.2.14 by using the
            instructions in the <ulink
              url="http://download.cloud.com/releases/2.2.0/CloudStack2.2.14ReleaseNotes.pdf">2.2.14
              Release Notes</ulink>.</para>
          <warning>
            <title>KVM Hosts</title>
            <para>If KVM hypervisor is used in your cloud, be sure you completed the step to insert
              a valid username and password into the host_details table on each KVM node as
              described in the 2.2.14 Release Notes. This step is critical, as the database will be
              encrypted after the upgrade to 4.1.0.</para>
          </warning>
        </listitem>
        <listitem>
          <para>While running the 2.2.14 system, log in to the UI as root administrator.</para>
        </listitem>
        <listitem>
          <para>Using the UI, add a new System VM template for each hypervisor type that is used in
            your cloud. In each zone, add a system VM template for each hypervisor used in that
            zone</para>
          <orderedlist>
            <listitem>
              <para>In the left navigation bar, click Templates.</para>
            </listitem>
            <listitem>
              <para>In Select view, click Templates.</para>
            </listitem>
            <listitem>
              <para>Click Register template.</para>
              <para>The Register template dialog box is displayed.</para>
            </listitem>
            <listitem>
              <para>In the Register template dialog box, specify the following values depending on
                the hypervisor type (do not change these):</para>
              <informaltable>
                <tgroup cols="2" align="left" colsep="1" rowsep="1">
                  <colspec colwidth="1*" colname="1" colnum="1"/>
                  <colspec colwidth="2*" colname="2" colnum="2"/>
                  <thead>
                    <row>
                      <entry><para>Hypervisor</para></entry>
                      <entry><para>Description</para></entry>
                    </row>
                  </thead>
                  <tbody>
                    <row>
                      <entry><para>XenServer</para></entry>
                      <entry><para>Name: systemvm-xenserver-4.1.0</para>
                        <para>Description: systemvm-xenserver-4.1.0</para>
                        <para>URL:
                          http://download.cloud.com/templates/acton/acton-systemvm-02062012.vhd.bz2</para>
                        <para>Zone: Choose the zone where this hypervisor is used</para>
                        <para>Hypervisor: XenServer</para>
                        <para>Format: VHD</para>
                        <para>OS Type: Debian GNU/Linux 5.0 (32-bit)</para>
                        <para>Extractable: no</para>
                        <para>Password Enabled: no</para>
                        <para>Public: no</para>
                        <para>Featured: no</para>
                      </entry>
                    </row>
                    <row>
                      <entry><para>KVM</para></entry>
                      <entry><para>Name: systemvm-kvm-4.1.0</para>
                        <para>Description: systemvm-kvm-4.1.0</para>
                        <para>URL:
                          http://download.cloud.com/templates/acton/acton-systemvm-02062012.qcow2.bz2</para>
                        <para>Zone: Choose the zone where this hypervisor is used</para>
                        <para>Hypervisor: KVM</para>
                        <para>Format: QCOW2</para>
                        <para>OS Type: Debian GNU/Linux 5.0 (32-bit)</para>
                        <para>Extractable: no</para>
                        <para>Password Enabled: no</para>
                        <para>Public: no</para>
                        <para>Featured: no</para>
                      </entry>
                    </row>
                    <row>
                      <entry><para>VMware</para></entry>
                      <entry><para>Name: systemvm-vmware-4.1.0</para>
                        <para>Description: systemvm-vmware-4.1.0</para>
                        <para>URL:
                          http://download.cloud.com/templates/burbank/burbank-systemvm-08012012.ova</para>
                        <para>Zone: Choose the zone where this hypervisor is used</para>
                        <para>Hypervisor: VMware</para>
                        <para>Format: OVA</para>
                        <para>OS Type: Debian GNU/Linux 5.0 (32-bit)</para>
                        <para>Extractable: no</para>
                        <para>Password Enabled: no</para>
                        <para>Public: no</para>
                        <para>Featured: no</para>
                      </entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>Watch the screen to be sure that the template downloads successfully and enters the
            READY state. Do not proceed until this is successful</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">WARNING</emphasis>: If you use more than one type of
            hypervisor in your cloud, be sure you have repeated these steps to download the system
            VM template for each hypervisor type. Otherwise, the upgrade will fail.</para>
        </listitem>
        <listitem>
          <para>Stop all Usage Servers if running. Run this on all Usage Server hosts.</para>
          <programlisting># service cloud-usage stop</programlisting>
        </listitem>
        <listitem>
          <para>Stop the Management Servers. Run this on all Management Server hosts.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-management stop</programlisting>
        </listitem>
        <listitem>
          <para>On the MySQL master, take a backup of the MySQL databases. We recommend performing
            this step even in test upgrades. If there is an issue, this will assist with
            debugging.</para>
          <para>In the following commands, it is assumed that you have set the root password on the
            database, which is a CloudStack recommended best practice. Substitute your own MySQL
            root password.</para>
          <programlisting><prompt>#</prompt> <command>mysqldump</command> -u root -p<replaceable>mysql_password</replaceable> cloud > <filename>cloud-backup.dmp</filename>
                        <prompt>#</prompt> <command>mysqldump</command> -u root -p<replaceable>mysql_password</replaceable> cloud_usage > <filename>cloud-usage-backup.dmp</filename>
                    </programlisting>
        </listitem>
        <listitem>
          <para> Either build RPM/DEB packages as detailed in the Installation Guide, or use one of
            the community provided yum/apt repositories to gain access to the &PRODUCT; binaries.
          </para>
        </listitem>
        <listitem id="upgrade-deb-packages-22">
          <para>If you are using Ubuntu, follow this procedure to upgrade your packages. If not,
            skip to step <xref linkend="upgrade-rpm-packages-22"/>.</para>
          <note>
            <title>Community Packages</title>
            <para>This section assumes you're using the community supplied packages for &PRODUCT;.
              If you've created your own packages and APT repository, substitute your own URL for
              the ones used in these examples.</para>
          </note>
          <orderedlist id="debsteps-22">
            <listitem>
              <para>The first order of business will be to change the sources list for each system
                with &PRODUCT; packages. This means all management servers, and any hosts that have
                the KVM agent. (No changes should be necessary for hosts that are running VMware or
                Xen.)</para>
              <para>Start by opening <filename>/etc/apt/sources.list.d/cloudstack.list</filename> on
                any systems that have &PRODUCT; packages installed.</para>
              <para>This file should have one line, which contains:</para>
              <programlisting language="Bash">deb http://cloudstack.apt-get.eu/ubuntu precise 4.0</programlisting>
              <para>We'll change it to point to the new package repository:</para>
              <programlisting language="Bash">deb http://cloudstack.apt-get.eu/ubuntu precise 4.1</programlisting>
              <para>If you're using your own package repository, change this line to read as
                appropriate for your 4.1.0 repository.</para>
            </listitem>
            <listitem>
              <para>Now update your apt package list:</para>
              <programlisting language="Bash">$ sudo apt-get update</programlisting>
            </listitem>
            <listitem id="deb-master-22">
              <para>Now that you have the repository configured, it's time to install the
                  <filename>cloudstack-management</filename> package. This will pull in any other
                dependencies you need.</para>
              <programlisting language="Bash">$ sudo apt-get install cloudstack-management</programlisting>
            </listitem>
            <listitem id="kvm-agent-deb-22">
              <para>You will need to manually install the <filename>cloudstack-agent</filename>
                package:</para>
              <programlisting language="Bash">$ sudo apt-get install cloudstack-agent</programlisting>
              <para>During the installation of <filename>cloudstack-agent</filename>, APT will copy
                your <filename>agent.properties</filename>, <filename>log4j-cloud.xml</filename>,
                and <filename>environment.properties</filename> from
                  <filename>/etc/cloud/agent</filename> to
                  <filename>/etc/cloudstack/agent</filename>.</para>
              <para>When prompted whether you wish to keep your configuration, say Yes.</para>
            </listitem>
            <listitem>
              <para>Verify that the file
                  <filename>/etc/cloudstack/agent/environment.properties</filename> has a line that
                reads:</para>
              <programlisting language="Bash">paths.script=/usr/share/cloudstack-common</programlisting>
              <para>If not, add the line.</para>
            </listitem>
            <listitem>
              <para>Restart the agent:</para>
              <programlisting language="Bash">
service cloud-agent stop
killall jsvc
service cloudstack-agent start
                            </programlisting>
            </listitem>
            <listitem>
              <para>During the upgrade, <filename>log4j-cloud.xml</filename> was simply copied over,
                so the logs will continue to be added to
                  <filename>/var/log/cloud/agent/agent.log</filename>. There's nothing
                  <emphasis>wrong</emphasis> with this, but if you prefer to be consistent, you can
                change this by copying over the sample configuration file:</para>
              <programlisting language="Bash">
cd /etc/cloudstack/agent
mv log4j-cloud.xml.dpkg-dist log4j-cloud.xml
service cloudstack-agent restart
                            </programlisting>
            </listitem>
            <listitem>
              <para>Once the agent is running, you can uninstall the old cloud-* packages from your
                system:</para>
              <programlisting language="Bash">sudo dpkg --purge cloud-agent</programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="upgrade-rpm-packages-22">
          <para>If you are using CentOS or RHEL, follow this procedure to upgrade your packages. If
            not, skip to step <xref linkend="correct-components-xml-22"/>.</para>
          <note>
            <title>Community Packages</title>
            <para>This section assumes you're using the community supplied packages for &PRODUCT;.
              If you've created your own packages and yum repository, substitute your own URL for
              the ones used in these examples.</para>
          </note>
          <orderedlist id="rpmsteps-22">
            <listitem>
              <para>The first order of business will be to change the yum repository for each system
                with &PRODUCT; packages. This means all management servers, and any hosts that have
                the KVM agent. (No changes should be necessary for hosts that are running VMware or
                Xen.)</para>
              <para>Start by opening <filename>/etc/yum.repos.d/cloudstack.repo</filename> on any
                systems that have &PRODUCT; packages installed.</para>
              <para>This file should have content similar to the following:</para>
              <programlisting language="Bash">
[apache-cloudstack]
name=Apache CloudStack
baseurl=http://cloudstack.apt-get.eu/rhel/4.0/
enabled=1
gpgcheck=0
                            </programlisting>
              <para>If you are using the community provided package repository, change the baseurl
                to http://cloudstack.apt-get.eu/rhel/4.1/</para>
              <para>If you're using your own package repository, change this line to read as
                appropriate for your 4.1.0 repository.</para>
            </listitem>
            <listitem id="rpm-master-22">
              <para>Now that you have the repository configured, it's time to install the
                  <filename>cloudstack-management</filename> package by upgrading the older
                  <filename>cloud-client</filename> package.</para>
              <programlisting language="Bash">$ sudo yum upgrade cloud-client</programlisting>
            </listitem>
            <listitem id="kvm-agent-rpm-22">
              <para>For KVM hosts, you will need to upgrade the <filename>cloud-agent</filename>
                package, similarly installing the new version as
                  <filename>cloudstack-agent</filename>.</para>
              <programlisting language="Bash">$ sudo yum upgrade cloud-agent</programlisting>
              <para>During the installation of <filename>cloudstack-agent</filename>, the RPM will
                copy your <filename>agent.properties</filename>,
                  <filename>log4j-cloud.xml</filename>, and
                  <filename>environment.properties</filename> from
                  <filename>/etc/cloud/agent</filename> to
                  <filename>/etc/cloudstack/agent</filename>.</para>
            </listitem>
            <listitem>
              <para>Verify that the file
                  <filename>/etc/cloudstack/agent/environment.properties</filename> has a line that
                reads:</para>
              <programlisting language="Bash">paths.script=/usr/share/cloudstack-common</programlisting>
              <para>If not, add the line.</para>
            </listitem>
            <listitem>
              <para>Restart the agent:</para>
              <programlisting language="Bash">
service cloud-agent stop
killall jsvc
service cloudstack-agent start
                            </programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem id="correct-components-xml-22">
          <para>If you have made changes to your existing copy of the file components.xml in your
            previous-version CloudStack installation, the changes will be preserved in the upgrade.
            However, you need to do the following steps to place these changes in a new version of
            the file which is compatible with version 4.0.0-incubating.</para>
          <note>
            <para>How will you know whether you need to do this? If the upgrade output in the
              previous step included a message like the following, then some custom content was
              found in your old components.xml, and you need to merge the two files:</para>
          </note>
          <programlisting>warning: /etc/cloud/management/components.xml created as /etc/cloud/management/components.xml.rpmnew </programlisting>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Make a backup copy of your
                  <filename>/etc/cloud/management/components.xml</filename> file. For
                example:</para>
              <programlisting><prompt>#</prompt> <command>mv</command> <filename>/etc/cloud/management/components.xml</filename> <filename>/etc/cloud/management/components.xml-backup</filename></programlisting>
            </listitem>
            <listitem>
              <para>Copy <filename>/etc/cloud/management/components.xml.rpmnew</filename> to create
                a new <filename>/etc/cloud/management/components.xml</filename>:</para>
              <programlisting><prompt>#</prompt> <command>cp</command> -ap <filename>/etc/cloud/management/components.xml.rpmnew</filename> <filename>/etc/cloud/management/components.xml</filename></programlisting>
            </listitem>
            <listitem>
              <para>Merge your changes from the backup file into the new components.xml file.</para>
              <programlisting><prompt>#</prompt> <command>vi</command> <filename>/etc/cloud/management/components.xml</filename>
                            </programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>If you have made changes to your existing copy of the
              <filename>/etc/cloud/management/db.properties</filename> file in your previous-version
            CloudStack installation, the changes will be preserved in the upgrade. However, you need
            to do the following steps to place these changes in a new version of the file which is
            compatible with version 4.0.0-incubating.</para>
          <orderedlist>
            <listitem>
              <para>Make a backup copy of your file
                  <filename>/etc/cloud/management/db.properties</filename>. For example:</para>
              <programlisting><prompt>#</prompt> <command>mv</command> <filename>/etc/cloud/management/db.properties</filename> <filename>/etc/cloud/management/db.properties-backup</filename></programlisting>
            </listitem>
            <listitem>
              <para>Copy <filename>/etc/cloud/management/db.properties.rpmnew</filename> to create a
                new <filename>/etc/cloud/management/db.properties</filename>:</para>
              <programlisting><prompt>#</prompt> <command>cp</command> -ap <filename>/etc/cloud/management/db.properties.rpmnew</filename> <filename>etc/cloud/management/db.properties</filename></programlisting>
            </listitem>
            <listitem>
              <para>Merge your changes from the backup file into the new db.properties file.</para>
              <programlisting><prompt>#</prompt> <command>vi</command> <filename>/etc/cloud/management/db.properties</filename></programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>On the management server node, run the following command. It is recommended that you
            use the command-line flags to provide your own encryption keys. See Password and Key
            Encryption in the Installation Guide.</para>
          <programlisting><prompt>#</prompt> <command>cloud-setup-encryption</command> -e <replaceable>encryption_type</replaceable> -m <replaceable>management_server_key</replaceable> -k <replaceable>database_key</replaceable></programlisting>
          <para>When used without arguments, as in the following example, the default encryption
            type and keys will be used:</para>
          <itemizedlist>
            <listitem>
              <para>(Optional) For encryption_type, use file or web to indicate the technique used
                to pass in the database encryption password. Default: file.</para>
            </listitem>
            <listitem>
              <para>(Optional) For management_server_key, substitute the default key that is used to
                encrypt confidential parameters in the properties file. Default: password. It is
                highly recommended that you replace this with a more secure value</para>
            </listitem>
            <listitem>
              <para>(Optional) For database_key, substitute the default key that is used to encrypt
                confidential parameters in the CloudStack database. Default: password. It is highly
                recommended that you replace this with a more secure value.</para>
            </listitem>
          </itemizedlist>
        </listitem>
        <listitem>
          <para>Repeat steps 10 - 14 on every management server node. If you provided your own
            encryption key in step 14, use the same key on all other management servers.</para>
        </listitem>
        <listitem>
          <para>Start the first Management Server. Do not start any other Management Server nodes
            yet.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-management start</programlisting>
          <para>Wait until the databases are upgraded. Ensure that the database upgrade is complete.
            You should see a message like "Complete! Done." After confirmation, start the other
            Management Servers one at a time by running the same command on each node.</para>
        </listitem>
        <listitem>
          <para>Start all Usage Servers (if they were running on your previous version). Perform
            this on each Usage Server host.</para>
          <programlisting language="Bash"><prompt>#</prompt> service cloud-usage start</programlisting>
        </listitem>
        <listitem>
          <para>(KVM only) Additional steps are required for each KVM host. These steps will not
            affect running guests in the cloud. These steps are required only for clouds using KVM
            as hosts and only on the KVM hosts.</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para> Configure your CloudStack package repositories as outlined in the Installation
                Guide </para>
            </listitem>
            <listitem>
              <para>Stop the running agent.</para>
              <programlisting># service cloud-agent stop</programlisting>
            </listitem>
            <listitem>
              <para>Update the agent software with one of the following command sets as
                appropriate.</para>
              <programlisting><prompt>#</prompt> <command>yum</command> update cloud-*</programlisting>
              <programlisting>
                                <prompt>#</prompt> <command>apt-get</command> update
                                <prompt>#</prompt> <command>apt-get</command> upgrade cloud-*
                            </programlisting>
            </listitem>
            <listitem>
              <para>Start the agent.</para>
              <programlisting># service cloud-agent start</programlisting>
            </listitem>
            <listitem>
              <para> Copy the contents of the <filename>agent.properties</filename> file to the new
                  <filename>agent.properties</filename> file by using the following command</para>
              <programlisting><command>sed</command> -i 's/com.cloud.agent.resource.computing.LibvirtComputingResource/com.cloud.hypervisor.kvm.resource.LibvirtComputingResource/g' <filename>/etc/cloud/agent/agent.properties</filename></programlisting>
            </listitem>
            <listitem>
              <para>Start the cloud agent and cloud management services.</para>
            </listitem>
            <listitem>
              <para>When the Management Server is up and running, log in to the CloudStack UI and
                restart the virtual router for proper functioning of all the features.</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>Log in to the CloudStack UI as admin, and check the status of the hosts. All hosts
            should come to Up state (except those that you know to be offline). You may need to wait
            20 or 30 minutes, depending on the number of hosts.</para>
          <para>Do not proceed to the next step until the hosts show in the Up state. If the hosts
            do not come to the Up state, contact support.</para>
        </listitem>
        <listitem>
          <para>Run the following script to stop, then start, all Secondary Storage VMs, Console
            Proxy VMs, and virtual routers.</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Run the command once on one management server. Substitute your own IP address of
                the MySQL instance, the MySQL user to connect as, and the password to use for that
                user. In addition to those parameters, provide the "-c" and "-r" arguments. For
                example:</para>
              <programlisting><prompt>#</prompt> <command>nohup cloud-sysvmadm</command> -d <replaceable>192.168.1.5</replaceable> -u cloud -p <replaceable>password</replaceable> -c -r > sysvm.log 2>&amp;1 &amp;
                                <prompt>#</prompt> <command>tail</command> -f <filename>sysvm.log</filename></programlisting>
              <para>This might take up to an hour or more to run, depending on the number of
                accounts in the system.</para>
            </listitem>
            <listitem>
              <para>After the script terminates, check the log to verify correct execution:</para>
              <programlisting><prompt>#</prompt> <command>tail</command> -f <filename>sysvm.log</filename></programlisting>
              <para>The content should be like the following:</para>
              <programlisting>
                                Stopping and starting 1 secondary storage vm(s)...
                                Done stopping and starting secondary storage vm(s)
                                Stopping and starting 1 console proxy vm(s)...
                                Done stopping and starting console proxy vm(s).
                                Stopping and starting 4 running routing vm(s)...
                                Done restarting router(s).
                            </programlisting>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para>If you would like additional confirmation that the new system VM templates were
            correctly applied when these system VMs were rebooted, SSH into the System VM and check
            the version.</para>
          <para>Use one of the following techniques, depending on the hypervisor.</para>
          <formalpara>
            <title>XenServer or KVM:</title>
            <para>SSH in by using the link local IP address of the system VM. For example, in the
              command below, substitute your own path to the private key used to log in to the
              system VM and your own link local IP.</para>
          </formalpara>
          <para>Run the following commands on the XenServer or KVM host on which the system VM is
            present:</para>
          <programlisting><prompt>#</prompt> <command>ssh</command> -i <replaceable>private-key-path</replaceable> <replaceable>link-local-ip</replaceable> -p 3922
                        # cat /etc/cloudstack-release</programlisting>
          <para>The output should be like the following:</para>
          <programlisting>Cloudstack Release 4.0.0-incubating Mon Oct 9 15:10:04 PST 2012</programlisting>
          <formalpara>
            <title>ESXi</title>
            <para>SSH in using the private IP address of the system VM. For example, in the command
              below, substitute your own path to the private key used to log in to the system VM and
              your own private IP.</para>
          </formalpara>
          <para>Run the following commands on the Management Server:</para>
          <programlisting><prompt>#</prompt> <command>ssh</command> -i <replaceable>private-key-path</replaceable> <replaceable>private-ip</replaceable> -p 3922
                        <prompt>#</prompt> <command>cat</command> <filename>/etc/cloudstack-release</filename>
                    </programlisting>
          <para>The output should be like the following:</para>
          <programlisting>Cloudstack Release 4.0.0-incubating Mon Oct 9 15:10:04 PST 2012</programlisting>
        </listitem>
        <listitem>
          <para>If needed, upgrade all Citrix XenServer hypervisor hosts in your cloud to a version
            supported by CloudStack 4.0.0-incubating. The supported versions are XenServer 5.6 SP2
            and 6.0.2. Instructions for upgrade can be found in the CloudStack 4.0.0-incubating
            Installation Guide.</para>
        </listitem>
        <listitem>
          <para>Apply the XenServer hotfix XS602E003 (and any other needed hotfixes) to XenServer
            v6.0.2 hypervisor hosts.</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para>Disconnect the XenServer cluster from CloudStack.</para>
              <para>In the left navigation bar of the CloudStack UI, select Infrastructure. Under
                Clusters, click View All. Select the XenServer cluster and click Actions -
                Unmanage.</para>
              <para>This may fail if there are hosts not in one of the states Up, Down,
                Disconnected, or Alert. You may need to fix that before unmanaging this
                cluster.</para>
              <para>Wait until the status of the cluster has reached Unmanaged. Use the CloudStack
                UI to check on the status. When the cluster is in the unmanaged state, there is no
                connection to the hosts in the cluster.</para>
            </listitem>
            <listitem>
              <para>To clean up the VLAN, log in to one XenServer host and run:</para>
              <programlisting>/opt/xensource/bin/cloud-clean-vlan.sh</programlisting>
            </listitem>
            <listitem>
              <para>Prepare the upgrade by running the following on one XenServer host:</para>
              <programlisting>/opt/xensource/bin/cloud-prepare-upgrade.sh</programlisting>
              <para>If you see a message like "can't eject CD", log in to the VM and umount the CD,
                then run this script again.</para>
            </listitem>
            <listitem>
              <para>Upload the hotfix to the XenServer hosts. Always start with the Xen pool master,
                then the slaves. Using your favorite file copy utility (e.g. WinSCP), copy the
                hotfixes to the host. Place them in a temporary folder such as /root or /tmp. </para>
              <para>On the Xen pool master, upload the hotfix with this command:</para>
              <programlisting>xe patch-upload file-name=XS602E003.xsupdate</programlisting>
              <para>Make a note of the output from this command, which is a UUID for the hotfix
                file. You'll need it in another step later.</para>
              <note>
                <para>(Optional) If you are applying other hotfixes as well, you can repeat the
                  commands in this section with the appropriate hotfix number. For example,
                  XS602E004.xsupdate.</para>
              </note>
            </listitem>
            <listitem>
              <para>Manually live migrate all VMs on this host to another host. First, get a list of
                the VMs on this host:</para>
              <programlisting># xe vm-list</programlisting>
              <para>Then use this command to migrate each VM. Replace the example host name and VM
                name with your own:</para>
              <programlisting><prompt>#</prompt> <command>xe</command> vm-migrate live=true host=<replaceable>host-name</replaceable> vm=<replaceable>VM-name</replaceable></programlisting>
              <note>
                <title>Troubleshooting</title>
                <para>If you see a message like "You attempted an operation on a VM which requires
                  PV drivers to be installed but the drivers were not detected," run:</para>
                <para><command>/opt/xensource/bin/make_migratable.sh
                    b6cf79c8-02ee-050b-922f-49583d9f1a14</command>.</para>
              </note>
            </listitem>
            <listitem>
              <para>Apply the hotfix. First, get the UUID of this host:</para>
              <para><command># xe host-list</command></para>
              <para>Then use the following command to apply the hotfix. Replace the example host
                UUID with the current host ID, and replace the hotfix UUID with the output from the
                patch-upload command you ran on this machine earlier. You can also get the hotfix
                UUID by running xe patch-list. </para>
              <para><command>xe patch-apply host-uuid=<replaceable>host-uuid</replaceable>
                    uuid=<replaceable>hotfix-uuid</replaceable></command></para>
            </listitem>
            <listitem>
              <para>Copy the following files from the CloudStack Management Server to the
                host.</para>
              <informaltable>
                <tgroup cols="2" align="left" colsep="1" rowsep="1">
                  <colspec colwidth="1*" colname="1" colnum="1"/>
                  <colspec colwidth="2*" colname="2" colnum="2"/>
                  <thead>
                    <row>
                      <entry><para>Copy from here...</para></entry>
                      <entry><para>...to here</para></entry>
                    </row>
                  </thead>
                  <tbody>
                    <row>
                      <entry><para><filename>/usr/lib64/cloud/common/scripts/vm/hypervisor/xenserver/xenserver60/NFSSR.py</filename></para></entry>
                      <entry><para><filename>/opt/xensource/sm/NFSSR.py</filename></para></entry>
                    </row>
                    <row>
                      <entry><para><filename>/usr/lib64/cloud/common/scripts/vm/hypervisor/xenserver/setupxenserver.sh</filename></para></entry>
                      <entry><para><filename>/opt/xensource/bin/setupxenserver.sh</filename></para></entry>
                    </row>
                    <row>
                      <entry><para><filename>/usr/lib64/cloud/common/scripts/vm/hypervisor/xenserver/make_migratable.sh</filename></para></entry>
                      <entry><para><filename>/opt/xensource/bin/make_migratable.sh</filename></para></entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>
            </listitem>
            <listitem>
              <para>(Only for hotfixes XS602E005 and XS602E007) You need to apply a new Cloud
                Support Pack.</para>
              <itemizedlist>
                <listitem>
                  <para>Download the CSP software onto the XenServer host from one of the following
                    links:</para>
                  <para>For hotfix XS602E005: <ulink
                      url="http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E005/56710/xe-phase-2/xenserver-cloud-supp.tgz"
                      >http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E005/56710/xe-phase-2/xenserver-cloud-supp.tgz</ulink></para>
                  <para>For hotfix XS602E007: <ulink
                      url="http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E007/57824/xe-phase-2/xenserver-cloud-supp.tgz"
                      >http://coltrane.eng.hq.xensource.com/release/XenServer-6.x/XS-6.0.2/hotfixes/XS602E007/57824/xe-phase-2/xenserver-cloud-supp.tgz</ulink></para>
                </listitem>
                <listitem>
                  <para>Extract the file:</para>
                  <para><command># tar xf xenserver-cloud-supp.tgz</command></para>
                </listitem>
                <listitem>
                  <para>Run the following script:</para>
                  <para><command># xe-install-supplemental-pack
                    xenserver-cloud-supp.iso</command></para>
                </listitem>
                <listitem>
                  <para>If the XenServer host is part of a zone that uses basic networking, disable
                    Open vSwitch (OVS):</para>
                  <para><command># xe-switch-network-backend bridge</command></para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para>Reboot this XenServer host.</para>
            </listitem>
            <listitem>
              <para>Run the following:</para>
              <para><command>/opt/xensource/bin/setupxenserver.sh</command></para>
              <note>
                <para>If the message "mv: cannot stat `/etc/cron.daily/logrotate': No such file or
                  directory" appears, you can safely ignore it.</para>
              </note>
            </listitem>
            <listitem>
              <para>Run the following:</para>
              <para><command>for pbd in `xe pbd-list currently-attached=false| grep ^uuid | awk
                  '{print $NF}'`; do xe pbd-plug uuid=$pbd ; </command>
              </para>
            </listitem>
            <listitem>
              <para>On each slave host in the Xen pool, repeat these steps, starting from "manually
                live migrate VMs."</para>
            </listitem>
          </orderedlist>
        </listitem>
      </orderedlist>
    </section>
  </chapter>
  <!-- <chapter id="api-changes-4.1">
        <title>API Changes in 4.1.0</title>
    </chapter> -->
</book>
